<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.0">
<meta name="author" content="MuleSoft Inc.">
<title>Weave Documentation</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic|Noto+Serif:400,400italic,700,700italic|Droid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-check-square-o:first-child,ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after,a[href^="mailto:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{font-weight: normal}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#00}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Weave Documentation</h1>
<div class="details">
<span id="author" class="author">MuleSoft Inc.</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#_getting_started">1.1. Getting started:</a></li>
<li><a href="#_document_structure">1.2. Document Structure</a></li>
<li><a href="#_example_transformation">1.3. Example Transformation</a></li>
<li><a href="#_dataweave_canonical_model">1.4. DataWeave Canonical Model</a></li>
<li><a href="#_literal_expressions">1.5. Literal Expressions</a></li>
</ul>
</li>
<li><a href="#_variables">2. Variables</a>
<ul class="sectlevel2">
<li><a href="#_input_variables">2.1. Input Variables</a></li>
<li><a href="#_constants">2.2. Constants</a></li>
<li><a href="#_scoped_variables">2.3. Scoped Variables</a></li>
</ul>
</li>
<li><a href="#_selectors">3. Selectors</a>
<ul class="sectlevel2">
<li><a href="#_value_selector_expressions">3.1. Value Selector Expressions</a></li>
<li><a href="#_attribute_selector_expressions">3.2. Attribute Selector Expressions</a></li>
<li><a href="#_selectors_modifiers">3.3. Selectors modifiers</a></li>
<li><a href="#_key_present">3.4. Key Present</a></li>
<li><a href="#_assert_present">3.5. Assert Present</a></li>
<li><a href="#_reference_elements_from_an_incoming_mule_message">3.6. Reference Elements From an Incoming Mule Message</a></li>
</ul>
</li>
<li><a href="#_operators">4. Operators</a>
<ul class="sectlevel2">
<li><a href="#_map">4.1. Map</a></li>
<li><a href="#_map_object">4.2. Map Object</a></li>
<li><a href="#_pluck">4.3. Pluck</a></li>
<li><a href="#_filter">4.4. Filter</a></li>
<li><a href="#_remove">4.5. Remove</a></li>
<li><a href="#_default">4.6. Default</a></li>
<li><a href="#_when_otherwise">4.7. When / Otherwise</a></li>
<li><a href="#_unless_otherwise">4.8. Unless / Otherwise</a></li>
<li><a href="#_and">4.9. AND</a></li>
<li><a href="#_or">4.10. OR</a></li>
<li><a href="#_concat">4.11. Concat</a></li>
<li><a href="#_as_type_coercion">4.12. AS (Type Coercion)</a></li>
<li><a href="#_flatten">4.13. Flatten</a></li>
<li><a href="#_size_of">4.14. Size Of</a></li>
<li><a href="#_push">4.15. Push</a></li>
<li><a href="#_reduce">4.16. Reduce</a></li>
<li><a href="#_join_by">4.17. Join By</a></li>
<li><a href="#_split_by">4.18. Split By</a></li>
<li><a href="#_order_by">4.19. Order By</a></li>
<li><a href="#_group_by">4.20. Group By</a></li>
<li><a href="#_distinct_by">4.21. Distinct By</a></li>
<li><a href="#_replace">4.22. Replace</a></li>
<li><a href="#_matches">4.23. Matches</a></li>
<li><a href="#_similar">4.24. Similar</a></li>
<li><a href="#_upper">4.25. Upper</a></li>
<li><a href="#_lower">4.26. Lower</a></li>
<li><a href="#_camelize">4.27. Camelize</a></li>
<li><a href="#_capitalize">4.28. Capitalize</a></li>
<li><a href="#_dasherize">4.29. Dasherize</a></li>
<li><a href="#_underscore">4.30. Underscore</a></li>
<li><a href="#_ordinalize">4.31. Ordinalize</a></li>
<li><a href="#_pluralize">4.32. Pluralize</a></li>
<li><a href="#_singularize">4.33. Singularize</a></li>
<li><a href="#_basic_math_operations">4.34. Basic Math Operations</a></li>
<li><a href="#_date_time_operations">4.35. Date Time Operations</a></li>
</ul>
</li>
<li><a href="#_object">5. Object</a>
<ul class="sectlevel2">
<li><a href="#_special_types_of_objects">5.1. Special Types of Objects</a></li>
</ul>
</li>
<li><a href="#_array">6. Array</a>
<ul class="sectlevel2">
<li><a href="#_dynamic_arrays">6.1. Dynamic arrays</a></li>
<li><a href="#_selectors_2">6.2. Selectors</a></li>
</ul>
</li>
<li><a href="#_string">7. String</a>
<ul class="sectlevel2">
<li><a href="#_string_interpolation">7.1. String interpolation</a></li>
<li><a href="#_selectors_3">7.2. Selectors</a></li>
</ul>
</li>
<li><a href="#_number">8. Number</a></li>
<li><a href="#_boolean">9. Boolean</a></li>
<li><a href="#_dates">10. Dates</a>
<ul class="sectlevel2">
<li><a href="#_date">10.1. Date</a></li>
<li><a href="#_time">10.2. Time</a></li>
<li><a href="#_timezone">10.3. TimeZone</a></li>
<li><a href="#_datetime">10.4. DateTime</a></li>
<li><a href="#_local_date_time">10.5. Local Date Time</a></li>
<li><a href="#_period">10.6. Period</a></li>
<li><a href="#_accessors">10.7. Accessors</a></li>
<li><a href="#_changing_the_format_of_a_date">10.8. Changing the Format of a Date</a></li>
</ul>
</li>
<li><a href="#_regular_expressions">11. Regular Expressions</a></li>
<li><a href="#_custom_types">12. Custom Types</a>
<ul class="sectlevel2">
<li><a href="#_defining_types_as_a_hint_for_developers">12.1. Defining Types as a Hint for Developers</a></li>
<li><a href="#_defining_types_for_type_coercion">12.2. Defining Types For Type Coercion</a></li>
</ul>
</li>
<li><a href="#_functions_and_lambdas">13. Functions and Lambdas</a>
<ul class="sectlevel2">
<li><a href="#_lambdas">13.1. Lambdas</a></li>
<li><a href="#_functions">13.2. Functions</a></li>
<li><a href="#_existing_functions">13.3. Existing Functions</a></li>
</ul>
</li>
<li><a href="#_examples">14. Examples</a>
<ul class="sectlevel2">
<li><a href="#_basic">14.1. Basic</a></li>
<li><a href="#_json_to_xml">14.2. Json to Xml</a></li>
<li><a href="#_xml_to_json">14.3. XML To Json</a></li>
<li><a href="#_xml_to_json_2">14.4. XML To Json 2</a></li>
<li><a href="#_xml_group_by">14.5. Xml Group By</a></li>
<li><a href="#_xml_remove_sensitive_data">14.6. Xml Remove Sensitive Data</a></li>
<li><a href="#_replacement">14.7. Replacement</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>[IMPORTANT] You&#8217;re viewing documentation written using our new documentation platform. The following content is official MuleSoft documentation. If you have any feedback, please contact <a href="mailto:documentation@mulesoft.com">documentation@mulesoft.com</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The DataWeave Language is a powerful template engine that allows you to transform data to and from any kind of format (XML, CSV, JSON, Pojos, Maps, etc).</p>
</div>
<div class="sect2">
<h3 id="_getting_started">1.1. Getting started:</h3>
<div class="paragraph">
<p>In order to show the power of DataWeave, here are a few examples to get started.</p>
</div>
<div class="sect3">
<h4 id="_basic_example">1.1.1. Basic Example</h4>
<div class="paragraph">
<p>This example shows a simple mapping form JSON to XML</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Java 8 in Action: Lambdas, Streams, and functional-style programming</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mario Fusco</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2014</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/xml
---
{
  <span class="key">order</span>: {
    <span class="key">type</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Book</span><span class="delimiter">&quot;</span></span>,
    <span class="key">title</span>: payload.title,
    <span class="key">details</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">By $(payload.author) ($(payload.year))</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version='1.0' encoding='UTF-8'?&gt;</span>
<span class="tag">&lt;order&gt;</span>
  <span class="tag">&lt;type&gt;</span>Book<span class="tag">&lt;/type&gt;</span>
  <span class="tag">&lt;title&gt;</span>Java 8 in Action: Lambdas, Streams, and functional-style programming<span class="tag">&lt;/title&gt;</span>
  <span class="tag">&lt;details&gt;</span>By Mario Fusco (2014)<span class="tag">&lt;/details&gt;</span>
<span class="tag">&lt;/order&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_string_manipulation">1.1.2. String manipulation</h4>
<div class="paragraph">
<p>This example shows how easy it is to work with strings in DataWeave.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;users&gt;</span>
  <span class="tag">&lt;user&gt;</span>
    <span class="tag">&lt;name&gt;</span>Mariano Achaval<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;phone&gt;</span>152235465654<span class="tag">&lt;/phone&gt;</span>
    <span class="tag">&lt;street&gt;</span>Laprida 924<span class="tag">&lt;/street&gt;</span>
  <span class="tag">&lt;/user&gt;</span>
  <span class="tag">&lt;user&gt;</span>
    <span class="tag">&lt;name&gt;</span>Martin Alejandro Cousido<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;phone&gt;</span>15332255555<span class="tag">&lt;/phone&gt;</span>
    <span class="tag">&lt;street&gt;</span>Acassuso 2280<span class="tag">&lt;/street&gt;</span>
  <span class="tag">&lt;/user&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/xml
%output application/json
%function words(name) name splitBy <span class="string"><span class="delimiter">&quot;</span><span class="content"> </span><span class="delimiter">&quot;</span></span>
---
<span class="key">contacts</span>: payload.users.*user map using (parts =  words(<span class="global-variable">$.</span>name)){
  <span class="key">firstName</span>: parts[<span class="integer">0</span>],
  (<span class="key">secondName</span>: parts[<span class="integer">1</span>]) <span class="keyword">when</span> (sizeOf parts) &gt; <span class="integer">2</span>,
  <span class="key">lastName</span>: parts[<span class="integer">-1</span>],
  <span class="key">email</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">$((lower $.name) replace </span><span class="delimiter">&quot;</span></span> <span class="string"><span class="delimiter">&quot;</span><span class="content"> with </span><span class="delimiter">&quot;</span></span>.<span class="string"><span class="delimiter">&quot;</span><span class="content">)@acme.com.ar</span><span class="delimiter">&quot;</span></span>,
  <span class="key">address</span>: <span class="global-variable">$.</span>street
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">contacts</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Achaval</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mariano.achaval@acme.com.ar</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Laprida 924</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martin</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">secondName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Alejandro</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Cousido</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">email</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">martin.alejandro.cousido@acme.com.ar</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Acassuso 2280</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_grouping_by">1.1.3. Grouping by</h4>
<div class="paragraph">
<p>This example shows how easy it is to group by a given criteria and then transform that result to match the expected output.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Java Curiosities</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Luis Miguel</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">image</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.gravatar.com/avatar/a133c7d8d9245d063b136732272ea77e</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://javacuriosities.blogspot.com.ar/</span><span class="delimiter">&quot;</span></span>
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">CD</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">No culpes a la noche</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Luis Miguel</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">image</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.gravatar.com/avatar/a133c7d8d9245d063b136732272ea77e</span><span class="delimiter">&quot;</span></span>
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Mule in Action</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor Romero</span><span class="delimiter">&quot;</span></span>
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">CD</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">label</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Yesterday</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">The Beatles</span><span class="delimiter">&quot;</span></span>
      }
    ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
patents : payload.items groupBy <span class="global-variable">$.</span>author pluck {
  <span class="key">owner</span>: <span class="global-variable">$$</span>,
  <span class="key">categories</span>: <span class="global-variable">$.</span>type
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">patents</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">owner</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Victor Romero</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">categories</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>
      ]
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">owner</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Beatles</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">categories</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">CD</span><span class="delimiter">&quot;</span></span>
      ]
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">owner</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Luis Miguel</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">categories</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">CD</span><span class="delimiter">&quot;</span></span>
      ]
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_document_structure">1.2. Document Structure</h3>
<div class="paragraph">
<p>DataWeave files are divided into two main sections:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Header, which defines directives (optional)</p>
</li>
<li>
<p>The Body, which describes the output structure</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Both sections are delimited by a separator, which is not required if no header is present. The separator consists of three dashes: "---"</p>
</div>
<div class="paragraph">
<p>Below is a taste of what a .dwl file looks like. This code describes a conversion from a JSON input to an XML output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input application/json
%output application/xml
---
{
  <span class="key">user</span>: {
    <span class="key">name</span>: payload.user_name,
    <span class="key">lastName</span>: payload.user_lastName
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the two initial lines of code compose the header, the separator then delimits it from the rest of the file, the body, where the output structure is defined.
This DataWeave example expects to receive a JSON input that is structured like the JSON example below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"> {
  <span class="key"><span class="delimiter">&quot;</span><span class="content">user_name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">user_lastName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon receiving that as an input, DataWeave produces the XML output shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;user&gt;</span>
 <span class="tag">&lt;name&gt;</span>Annie<span class="tag">&lt;/name&gt;</span>
 <span class="tag">&lt;lastName&gt;</span>Point<span class="tag">&lt;/lastName&gt;</span>
<span class="tag">&lt;/user&gt;</span></code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_header">1.2.1. Header</h4>
<div class="paragraph">
<p>The DataWeave header contains the directives, these define high level information about your transformation. The structure of the Header is a sequence of lines, each with its own Directives. The Header is terminated with '---'.
Through directives you can define:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DataWeave <strong>version</strong></p>
</li>
<li>
<p><strong>Input</strong> types and sources</p>
</li>
<li>
<p><strong>Output</strong> type</p>
</li>
<li>
<p><strong>Namespaces</strong> to import into your transform</p>
</li>
<li>
<p><strong>Constants</strong> that can be referenced throughout the body</p>
</li>
<li>
<p><strong>Functions</strong> that can be called throughout the body</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_directives">Directives</h5>
<div class="paragraph">
<p>All directives are declared on the header section of your DataWeave document and act upon the entire scope of it. Directives are a mechanism to declare variables and constants and namespace aliases which need to be referenced in the Document.
They are also needed to declare the type of the output of your transform. In Anypoint Studio, you can optionally use them to declare additional inputs, you will rarely need them for this as any data arriving in the incoming Mule Message is already implicitly recognized as an input.</p>
</div>
<div class="sect5">
<h6 id="_version_directive">Version Directive:</h6>
<div class="paragraph">
<p>Through this directive, you specify the version of the DataWeave syntax that is used to interpret the transformation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_namespace_directive">Namespace Directive:</h6>
<div class="paragraph">
<p>This directive associates an alias with its subsequent URI. The directive is relevant only when either the input or the output is of type XML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%namespace mes <span class="key">http</span>:<span class="regexp"><span class="delimiter">/</span><span class="delimiter">/</span></span>www.mulesoft.com/anypoint/<span class="constant">SOA</span>/message/v1.<span class="error">0</span></code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_input_directive">Input Directive</h6>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When using DataWeave in Anypoint Studio, it&#8217;s not necessary to declare input directives for any of the components of the Mule Message that arrives to the DataWeave transformer (Payload, flow variables and input/outbound properties) nor for any system variables. These are already implicitly recognized as inputs and can be referenced anywhere in the DataWeave body without a need to include them in the header, their type is known from Mule metadata.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Inputs are declared by assigning a name and a content type. You may define as many input directives as you want, you can then refer to them (or their child elements) in any part of the DataWeave body through the names defined in the directive.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%input payload application/xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Valid types are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
<li>
<p>application/xml</p>
</li>
<li>
<p>application/java</p>
</li>
<li>
<p>application/csv</p>
</li>
<li>
<p>application/dw</p>
</li>
<li>
<p>text/json</p>
</li>
<li>
<p>text/xml</p>
</li>
<li>
<p>text/csv</p>
</li>
</ul>
</div>
<div class="sect6">
<h7 id="_csv_input_directive">CSV Input Directive</h7>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
When using DataWeave in Anypoint Studio, it&#8217;s not necessary to declare any input directives for any of the components of the Mule Message that arrives to the DataWeave transformer (Payload, flow variables and input/outbound properties) nor for any system variables. These are already implicitly recognized as inputs and can be referenced anywhere in the DataWeave body without a need to include them in the header, their type is known from Mule metadata.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When defining an input of type CSV, there are a few optional parameters you can add to the input directive to customize how the data will be parsed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>header</code>: boolean that defines if the first line in the data contains headers</p>
</li>
<li>
<p><code>separatorChar</code>: character that separates fields, <code>','</code> by default</p>
</li>
<li>
<p><code>quoteChar</code>: character that defines quoted text, <code>" "</code> by default</p>
</li>
<li>
<p><code>escapeChar</code>: character that escapes quotes, <code>/</code> by default</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A CSV input directive with custom parameters set looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%input in0 application/csv header=<span class="predefined-constant">true</span> separatorChar=;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When <code>header=true</code> you can then access the fields within the input anywhere by name. Ex: <code>in0.userName</code>.</p>
</div>
<div class="paragraph">
<p>When <code>header=false</code> you must access the fields by index, referencing first the entry and then the field, Ex: <code>in0[107][2]</code></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In Anypoint Studio, you can set the parameters of the CSV input through the graphical interface, by selecting the element from the tree view in the input section and then clicking the gear icon. See <a href="https://developer.mulesoft.com/docs/display/current/Using+DataWeave+in+Studio">DataWeave in Studio</a> for more details.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_output_directive">Output Directive</h6>
<div class="paragraph">
<p>The Output Directive specifies what is the output type of the transformation, specified using content/type.
Only one output can be specifed, the structure of this output is then to be defined in the DataWeave body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%output application/xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Valid types are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>application/json</p>
</li>
<li>
<p>application/xml</p>
</li>
<li>
<p>application/java</p>
</li>
<li>
<p>application/csv</p>
</li>
<li>
<p>application/dw</p>
</li>
<li>
<p>text/json</p>
</li>
<li>
<p>text/xml</p>
</li>
<li>
<p>text/csv</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="_define_constant_directive">Define Constant Directive</h6>
<div class="paragraph">
<p>You can define a constant in the header, you can then reference it (or its child elements, if any exist) in the DataWeave body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%var conversionRate=<span class="float">13.15</span>
%output application/json
---
{
 <span class="key">price_dollars</span>: payload.price,
 <span class="key">price_localCurrency</span>: payload.price * conversionRate
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_define_function_directive">Define Function Directive</h6>
<div class="paragraph">
<p>You can define a function in the header, you can then call it in any part of the DataWeave body, including arguments.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%var toUser = (user) -&gt; {<span class="key">name</span>: user.name, <span class="key">lastName</span>: user.lastName}
%output application/json
---
{
 <span class="key">user</span>: toUser(payload)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_body">1.2.2. Body</h4>
<div class="paragraph">
<p>The body contains the <strong>expression</strong> that generates the output structure. Regardless of the types of the input and output, the data model for the output is always described in the standard DataWeave language, and this model that the transform executes.
The data model of the produced output can consist of three different types of data:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Objects: represented as collection of key value pairs</p>
</li>
<li>
<p>Arrays: represented as a sequence of comma separated values</p>
</li>
<li>
<p>Simple literals</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>When you write your DataWeave file, you define an expression that generates one of the data types listed above.</p>
</div>
</div>
<div class="sect3">
<h4 id="_simple_literal_types">1.2.3. Simple Literal Types</h4>
<div class="paragraph">
<p>Literals can be of the following types:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>String : Double quoted ("Hello") or Single quoted ('Hello')</p>
</li>
<li>
<p>Boolean : Literals true or false</p>
</li>
<li>
<p>Number : Decimal and Integer values are supported (ex: 2.0)</p>
</li>
<li>
<p>Dates : IS0-8601 enclosed by "|" (ex:|2003-10-01T23:57:59Z|)</p>
</li>
<li>
<p>Regex : Regex expression enclosed by "/" (ex:/(\d+)-(\d+)/)</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby"><span class="constant">This</span> is a <span class="constant">String</span> literal expression</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_arrays">1.2.4. Arrays:</h4>
<div class="paragraph">
<p>Arrays are sequences of <strong>expressions</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">[ <span class="integer">1</span>, <span class="integer">2</span> + <span class="integer">2</span>, <span class="integer">3</span> * <span class="integer">3</span>, <span class="global-variable">$x</span> ]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_objects">1.2.5. Objects:</h4>
<div class="paragraph">
<p>These are represented as a comma separated sequence of key : value pairs surrounded by curly braces { }.</p>
</div>
<div class="listingblock">
<div class="title">Tramsform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">myoutput</span>:{
  name : <span class="string"><span class="delimiter">&quot;</span><span class="content">Jill</span><span class="delimiter">&quot;</span></span>,
  payload : payload.id + <span class="integer">3</span>
  }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;myoutput&gt;</span>
  <span class="tag">&lt;name&gt;</span>Jill<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;payload&gt;</span>5<span class="tag">&lt;/payload&gt;</span>
<span class="tag">&lt;/myoutput&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that both the keys and the values may be <strong>expressions</strong>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_transformation">1.3. Example Transformation</h3>
<div class="paragraph">
<p>Suppose you want to transform an XML document to JSON, appending extra content to the output.</p>
</div>
<div class="listingblock">
<div class="title">Input as XML</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;note&gt;</span>
  <span class="tag">&lt;to&gt;</span>Tove<span class="tag">&lt;/to&gt;</span>
  <span class="tag">&lt;from&gt;</span>Jani<span class="tag">&lt;/from&gt;</span>
  <span class="tag">&lt;heading&gt;</span>Reminder<span class="tag">&lt;/heading&gt;</span>
  <span class="tag">&lt;body&gt;</span>Don't forget me this weekend!<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/note&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/xml
%output application/json
%var date=<span class="string"><span class="delimiter">'</span><span class="content">01-MAR-2015</span><span class="delimiter">'</span></span>
---
{
  letter : payload,
  sent : date
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output as JSON</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">note</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">to</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tove</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">from</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Jani</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">heading</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Reminder</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">body</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Don't forget me this weekend!</span><span class="delimiter">&quot;</span></span>
    }
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">sent</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">01-MAR-2015</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Whenever you make a transformation from JSON to XML, make sure that the resulting output is valid as an XML file. Specifically, make sure that there&#8217;s a single parent tag, JSON supports having multiple elements at the highest level whilst XML doesn&#8217;t.
Likewise, whenever you transform from XML to JSON, make sure the resulting output is valid as a JSON file. Specifically, make sure that there are no repeated keys inside the same parent, XML supports having this but JSON doesn&#8217;t.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_dataweave_canonical_model">1.4. DataWeave Canonical Model</h3>
<div class="paragraph">
<p>As covered above, DataWeave uses three basic data types: Objects, Arrays and Simple Types, the execution of a DataWeave transformation always produces one of these three types of data. In essence, the body of every DataWeave transformation is a single Expression that defines the structure and contents of one such object. This expression can be built using any of the following elements:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Objects</p>
</li>
<li>
<p>Arrays</p>
</li>
<li>
<p>Simple literals</p>
</li>
<li>
<p>Variable and Constant references</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A DataWeave transformation can be as simple as the definition of a single element from the list above. Even a simple literal 'Hello world' is a valid DataWeave transformation.</p>
</div>
<div class="paragraph">
<p>Expressions can also be complex, meaning that they can be composed out of other expressions. This can be achieved by either nesting expressions inside Arrays or Objects, or through the use of operators.
In complex expressions, the result of one expression sets the context for the subsequent execution of other expressions. You just need to remember that each expression produces an Object, an Array or a Simple literal.</p>
</div>
<div class="paragraph">
<p>If you declare input directives on your DataWeave&#8217;s header, regardless of their type (XML, JSON, Java),
any execution that references these inputs will produce, as stated before, an Object, an Array or a Simple literal. When you understand the structure of these data types, expressed in the syntax of DataWeave expressions, you effectively understand DataWeave.</p>
</div>
<div class="paragraph">
<p>In Anypoint Studio, if you ever need to visualise the canonical DataWeave model of your data to get a better reference, set the output type of your transform to application/dw. Your transform will then output the your data as a DataWeave expression, which resembles a JSON object. See the example below:</p>
</div>
<div class="sect3">
<h4 id="_example_transformation_to_dataweave">1.4.1. Example Transformation to DataWeave</h4>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;note&gt;</span>
  <span class="tag">&lt;to&gt;</span>Tove<span class="tag">&lt;/to&gt;</span>
  <span class="tag">&lt;from&gt;</span>Jani<span class="tag">&lt;/from&gt;</span>
  <span class="tag">&lt;heading&gt;</span>Reminder<span class="tag">&lt;/heading&gt;</span>
  <span class="tag">&lt;body&gt;</span>Don't forget me this weekend!<span class="tag">&lt;/body&gt;</span>
<span class="tag">&lt;/note&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/dw
---
payload</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">{ <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">note</span>: { <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key">to</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tove</span><span class="delimiter">&quot;</span></span>,
    <span class="key">from</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Jani</span><span class="delimiter">&quot;</span></span>,
    <span class="key">heading</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Reminder</span><span class="delimiter">&quot;</span></span>, <i class="conum" data-value="3"></i><b>(3)</b>
    <span class="key">body</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Dont forget me this weekend!</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The input is parsed into an Object.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>As previously stated, Objects are sequences of key:value pairs. Note how each element name from the xml input is parsed into a key followed by a colon : and then the value.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The value may be a Simple literal, as is the case of the <strong>heading</strong> field, or an object, as is the case in <strong>note</strong> #2.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_literal_expressions">1.5. Literal Expressions</h3>
<div class="paragraph">
<p>These correspond to the three different data-types: Simple, Object and Array</p>
</div>
<div class="paragraph">
<p><strong>Simple Literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="integer">123</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Object Literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">message</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Array Literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
[ <span class="string"><span class="delimiter">&quot;</span><span class="content">My</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">three</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">words</span><span class="delimiter">&quot;</span></span> ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_variables">2. Variables</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_input_variables">2.1. Input Variables</h3>
<div class="paragraph">
<p>Input directives allow you to make any number of input sources available in global variables, which can then be referenced in any part of the Transform&#8217;s body. To reference one of these, you can just call it by the name you defined in the directive.
Remember that the Transform is itself an expression, so the entire body of the transform could be written as a simple variable reference to the input document.
Consider the example below, which transforms an incoming JSON document into XML, and where the output XML structure mimics the input JSON structure.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">document</span><span class="delimiter">&quot;</span></span> : {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">English</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input in0
%output application/xml
---
payload</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;document&gt;</span>
  <span class="tag">&lt;language&gt;</span>English<span class="tag">&lt;/language&gt;</span>
  <span class="tag">&lt;text&gt;</span>Hello world<span class="tag">&lt;/text&gt;</span>
<span class="tag">&lt;/document&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_constants">2.2. Constants</h3>
<div class="paragraph">
<p>In the DataWeave header, you define constants as directives, these can then be referenced as variables in any part of your transform body, just as you do with input variables.
The following creates an XML document and inserts the constant value for Language "Español" in the output language element.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
%var language=<span class="string"><span class="delimiter">'</span><span class="content">Español</span><span class="delimiter">'</span></span>
---
{
  <span class="key">document</span>: {
    <span class="key">language</span>: language,
    <span class="key">text</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hola mundo</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;document&gt;
  &lt;language&gt;Español&lt;/language&gt;
  &lt;text&gt;Hola Mundo&lt;/text&gt;
&lt;/document&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scoped_variables">2.3. Scoped Variables</h3>
<div class="paragraph">
<p>Variables declared in the Transform&#8217;s header always have a global scope, to declare and initialize a variable with a limited scope, you can do so in any part of the transform&#8217;s body.</p>
</div>
<div class="paragraph">
<p>You can initialize these variables using literal expressions, variable reference expressions or functional expressions. They may make reference to any other scoped variables or any of the input variables or constants in their initialization. The declaration and initialization can be prepended to any literal expression, but you must be aware that the literal they are prepended to delimits their scope. You cannot reference a variable outside its scope.</p>
</div>
<div class="paragraph">
<p>To declare a variable in the DataWeave body, the following syntax is supported: <strong>using (&lt;variable-name&gt; = &lt;expression&gt;)</strong> and it must be written before defining the contents of the literal that it will exist in.
To reference an already initialized variable, you can just call it by the name you defined for it as with any other variable, or you can also write it in the form <strong>$&lt;variable-name&gt;</strong>. Consider the following examples:</p>
</div>
<div class="paragraph">
<p><strong>Scoped to Simple literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
using (x = <span class="integer">2</span>) <span class="integer">3</span> + x <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Result is simply 5</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Scoped to Array literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
using (x = <span class="integer">2</span>) [<span class="integer">1</span>, x, <span class="integer">3</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Scoped to Object literal</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">person</span>: using (user = <span class="string"><span class="delimiter">&quot;</span><span class="content">Greg</span><span class="delimiter">&quot;</span></span>, gender = <span class="string"><span class="delimiter">&quot;</span><span class="content">male</span><span class="delimiter">&quot;</span></span>) { <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="key">name</span>: user, <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="key">gender</span>: gender
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declaration and initialization.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>user</strong> is a valid reference because it is within the object <strong>person</strong> for which it was declared.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Invalid Reference outside of Scope</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">entry</span>: using (firstName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>, lastName = <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>) {
  <span class="key">person</span>: using (user = firstName, gender = <span class="string"><span class="delimiter">&quot;</span><span class="content">male</span><span class="delimiter">&quot;</span></span>) {
    <span class="key">name</span>: user,
    <span class="key">gender</span>: gender
  },
  <span class="key">sn</span>: lastName, <i class="conum" data-value="1"></i><b>(1)</b>
  <span class="key">gen</span>: gender <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The reference <strong>lastName</strong> is valid because it is within scope.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The reference <strong>$gender</strong> is invalid because gender was declared in the <strong>person</strong> object, and this reference exists outside the scope of that object.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_selectors">3. Selectors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_value_selector_expressions">3.1. Value Selector Expressions</h3>
<div class="paragraph">
<p>The complex structure of Objects and Arrays can be navigated using Selector Expressions. Each selector expression returns either an object, an array or a simple type.
A selector always operates within a given context, which can be a reference to a variable, an object literal, an array literal or the invocation of a function. As DataWeave processes a selector, a new context is set for further selectors, and so you can navigate through the complex structures of arrays and objects by using chains of selectors, who&#8217;s depth is limited only by the depth of the current context.
There are 3 types of selector expression:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Single Value selector</strong> .&lt;key-name&gt;</p>
</li>
<li>
<p><strong>Multi Value selector</strong> .*&lt;key-name&gt;</p>
</li>
<li>
<p><strong>Descendants Selector</strong> ..&lt;key-name&gt;</p>
</li>
<li>
<p><strong>Indexed Selector</strong> [&lt;index&gt;]</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applying the <strong>Single level Explicit Selector</strong>, the <strong>Descendants Selector</strong> or the <strong>Indexed Selector</strong> returns the value of the key:value pair that matches the expression.</p>
</div>
<div class="paragraph">
<p>Each of these selector expressions supports having a '?' appended at the end of the chain. This changes the expression into a query that checks upon the existence of the key. The return type in this case is a boolean true or false.</p>
</div>
<div class="sect3">
<h4 id="_single_value_selector">3.1.1. Single Value selector</h4>
<div class="paragraph">
<p>This selector returns the first value whose key matches the expression, i.e <strong>payload.name</strong> returns the value whose key matches <strong>name</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">people</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">size</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Italia</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>: <span class="integer">2164</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">zone</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">San Isidro</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">address</span>: payload.people.person.address
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;address&gt;</span>
  <span class="tag">&lt;street&gt;</span>
    <span class="tag">&lt;name&gt;</span>Italia<span class="tag">&lt;/name&gt;</span>
    <span class="tag">&lt;number&gt;</span>2164<span class="tag">&lt;/number&gt;</span>
  <span class="tag">&lt;/street&gt;</span>
  <span class="tag">&lt;area&gt;</span>
    <span class="tag">&lt;zone&gt;</span>San Isidro<span class="tag">&lt;/zone&gt;</span>
    <span class="tag">&lt;name&gt;</span>Martinez<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;/area&gt;</span>
<span class="tag">&lt;/address&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_multi_value_selector">3.1.2. Multi Value selector</h4>
<div class="paragraph">
<p>This selector returns an array with all the values whose key matches the expression.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="error">&lt;</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">s</span><span class="error">&gt;</span>
  <span class="error">&lt;</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span><span class="error">M</span><span class="error">a</span><span class="error">r</span><span class="error">i</span><span class="error">a</span><span class="error">n</span><span class="error">o</span><span class="error">&lt;</span><span class="error">/</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span>
  <span class="error">&lt;</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span><span class="error">M</span><span class="error">a</span><span class="error">r</span><span class="error">t</span><span class="error">i</span><span class="error">n</span><span class="error">&lt;</span><span class="error">/</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span>
  <span class="error">&lt;</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span><span class="error">L</span><span class="error">e</span><span class="error">a</span><span class="error">n</span><span class="error">d</span><span class="error">r</span><span class="error">o</span><span class="error">&lt;</span><span class="error">/</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">&gt;</span>
<span class="error">&lt;</span><span class="error">/</span><span class="error">u</span><span class="error">s</span><span class="error">e</span><span class="error">r</span><span class="error">s</span><span class="error">&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">users</span>: payload.users.*user
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Martin</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Leandro</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_indexed_selector">3.1.3. Indexed Selector</h4>
<div class="paragraph">
<p>This selector can be applied to String literals, Arrays and Objects. In the case of Objects, the value of the key:value pair found at the index is returned.
The index is zero based.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the index is bigger or equal to 0, it starts counting from the beginning.</p>
</li>
<li>
<p>If the index is negative, it starts counting from the end where -1 is the last element.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">people</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
        },
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Coty</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Belgrano</span><span class="delimiter">&quot;</span></span>
        }
    ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
payload.people[<span class="integer">1</span>]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON">{
  <span class="error">n</span><span class="error">a</span><span class="error">m</span><span class="error">e</span>: <span class="error">C</span><span class="error">o</span><span class="error">t</span><span class="error">y</span>,
  <span class="error">a</span><span class="error">d</span><span class="error">d</span><span class="error">r</span><span class="error">e</span><span class="error">s</span><span class="error">s</span>: <span class="error">B</span><span class="error">e</span><span class="error">l</span><span class="error">g</span><span class="error">r</span><span class="error">a</span><span class="error">n</span><span class="error">o</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using the Index Selector with a String, the string is broken down into an array, where each character is an index.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%output application/json
---
{
  <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">MuleSoft</span><span class="delimiter">&quot;</span></span>[<span class="integer">0</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">M</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_range_selector">3.1.4. Range selector</h4>
<div class="paragraph">
<p>Range selectors limit the output to only the elements specified by the range on that specific order. This selector allows you to slice an array or even invert it.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">slice</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>][<span class="integer">0</span>..<span class="integer">1</span>],
  <span class="key">last</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>][<span class="integer">-1</span>..<span class="integer">0</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">slice</span><span class="delimiter">&quot;</span></span>: [
    <span class="integer">0</span>,
    <span class="integer">1</span>
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>: [
    <span class="integer">2</span>,
    <span class="integer">1</span>,
    <span class="integer">0</span>
  ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_attribute_selector_expressions">3.2. Attribute Selector Expressions</h3>
<div class="paragraph">
<p>In order to query for the attributes on an Object, the syntax <strong>.@&lt;key-name&gt;</strong> is used. If you just use <strong>.@</strong> (with no &lt;key-name&gt;) it returns an object containing each key:value pair in it.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;product</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;brand&gt;</span>Samsung<span class="tag">&lt;/brand&gt;</span>
<span class="tag">&lt;/product&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">item</span>: {
    type : payload.product.<span class="instance-variable">@type</span>,
    name : payload.product.brand,
    <span class="key">attributes</span>: payload.product.<span class="error">@</span>
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON">{
  <span class="error">i</span><span class="error">t</span><span class="error">e</span><span class="error">m</span>: {
    <span class="error">t</span><span class="error">y</span><span class="error">p</span><span class="error">e</span>: <span class="error">t</span><span class="error">v</span>,
    <span class="error">n</span><span class="error">a</span><span class="error">m</span><span class="error">e</span>: <span class="error">S</span><span class="error">a</span><span class="error">m</span><span class="error">s</span><span class="error">u</span><span class="error">n</span><span class="error">g</span>,
    <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span><span class="error">s</span>: { <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="error">i</span><span class="error">d</span>: <span class="integer">1</span>,
      <span class="error">t</span><span class="error">y</span><span class="error">p</span><span class="error">e</span>: <span class="error">t</span><span class="error">v</span>
    }
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The third element in this output retrieves an object with all of the attributes in it, in this case both the id and the type.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">item</span>: {
    attributes : payload.product.<span class="error">@</span>,
    name : payload.product.brand
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON">{
  <span class="error">i</span><span class="error">t</span><span class="error">e</span><span class="error">m</span>: {
    <span class="error">a</span><span class="error">t</span><span class="error">t</span><span class="error">r</span><span class="error">i</span><span class="error">b</span><span class="error">u</span><span class="error">t</span><span class="error">e</span><span class="error">s</span>: {
      <span class="error">i</span><span class="error">d</span>: <span class="integer">1</span>,
      <span class="error">t</span><span class="error">y</span><span class="error">p</span><span class="error">e</span>: <span class="error">t</span><span class="error">v</span>
    },
    <span class="error">n</span><span class="error">a</span><span class="error">m</span><span class="error">e</span>: <span class="error">S</span><span class="error">a</span><span class="error">m</span><span class="error">s</span><span class="error">u</span><span class="error">n</span><span class="error">g</span>
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_applying_selectors_to_arrays">3.2.1. Applying Selectors to Arrays</h4>
<div class="paragraph">
<p>When the context for selection is an Array, the result is always an Array. Each element on the context Array is queried for matching key:value pairs.
In each case, only the <strong>value</strong> of the key:value pair is returned.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">people</span><span class="delimiter">&quot;</span></span>: [ <i class="conum" data-value="1"></i><b>(1)</b>
    {
      <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>: {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
          <span class="string"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Italia</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>: <span class="integer">2164</span>
          },
          <span class="string"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">zone</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">San Isidro</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
          }
        }
      }
    },
    {
      <span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>: {
        <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Coty</span><span class="delimiter">&quot;</span></span>,
        <span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
          <span class="string"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Monroe</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>: <span class="integer">323</span>
          },
          <span class="string"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>: {
            <span class="string"><span class="delimiter">&quot;</span><span class="content">zone</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">BA</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Belgrano</span><span class="delimiter">&quot;</span></span>
          }
        }
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As 'people' is an array, this sets the context for searching across both 'person' instances. The result from this is always an array.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
payload.people.person.address.street</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON">[ <i class="conum" data-value="1"></i><b>(1)</b>
  {
    <span class="error">n</span><span class="error">a</span><span class="error">m</span><span class="error">e</span>: <span class="error">I</span><span class="error">t</span><span class="error">a</span><span class="error">l</span><span class="error">i</span><span class="error">a</span>,
    <span class="error">n</span><span class="error">u</span><span class="error">m</span><span class="error">b</span><span class="error">e</span><span class="error">r</span>: <span class="integer">2164</span>
  },
  {
    <span class="error">n</span><span class="error">a</span><span class="error">m</span><span class="error">e</span>: <span class="error">M</span><span class="error">o</span><span class="error">n</span><span class="error">r</span><span class="error">o</span><span class="error">e</span>,
    <span class="error">n</span><span class="error">u</span><span class="error">m</span><span class="error">b</span><span class="error">e</span><span class="error">r</span>: <span class="integer">323</span>
  }
]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the context is an array, the output is always an array. An array is returned even if there&#8217;s a single matching value.</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_selecting_the_key_value_pair">Selecting the key value pair</h5>
<div class="paragraph">
<p>As selectors only return the value of a key:value pair, in order to get both the key and value, you can use a type conversion to object.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Doe</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">user</span>: payload.name as <span class="symbol">:object</span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;user&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/user&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using the <strong>as :object</strong> transforms the value into an object that contains the key as well as the value. Without this conversion to object, the returned XML body would simply be &lt;user&gt;Mariano&lt;/user&gt;.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_descendants_selector">3.2.2. Descendants Selector</h4>
<div class="paragraph">
<p>This selector is applied to the context using the form <strong>..&lt;field-name&gt;</strong> and retrieves the values of all matching key:value pairs in the sub-tree under the current context. Regardless of the hierarchical structure these fields are organized in, they are all placed at the same level in the output.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">people</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Italia</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>: <span class="integer">2164</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">zone</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">San Isidro</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">names</span>: payload.people..name <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">names</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Italia</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In this example, all of the fields that match the key "name" are placed in a list called "names", regardless of their cardinality in the tree of the input data.</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_selecting_all_the_descendant_key_value_pairs">Selecting all the descendant key value pairs</h5>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">people</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nial</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Italia</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">number</span><span class="delimiter">&quot;</span></span>: <span class="integer">2164</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">area</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">zone</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">San Isidro</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Martinez</span><span class="delimiter">&quot;</span></span>
        }
      }
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">names</span>: payload.people..name as <span class="symbol">:object</span><i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;names&gt;</span>
  <span class="tag">&lt;name&gt;</span>Nial<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;name&gt;</span>Italia<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;name&gt;</span>Martinez<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/names&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <strong>as: object</strong> makes the expression return an object rather than an array (which would be returned by default). This implies that each value has a key. Without this conversion, in XML the returned array would be a single long string of characters comprised of all three names merged into one.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selectors_modifiers">3.3. Selectors modifiers</h3>
<div class="paragraph">
<p>There are two selectors modifiers: ? and !.
The first returns true or false whether the keys are present on the structures.
The second one evaluates the selection and fails if any key is not present.</p>
</div>
</div>
<div class="sect2">
<h3 id="_key_present">3.4. Key Present</h3>
<div class="paragraph">
<p>Returns true if the specified key is present in the object.</p>
</div>
<div class="listingblock">
<div class="title">Input:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">present</span>: payload.name?</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;present&gt;</span>true<span class="tag">&lt;/present&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, as a 'name' key does exist in the input, it returns <strong>true</strong></p>
</div>
<div class="paragraph">
<p>This operation also works with attributes:</p>
</div>
<div class="listingblock">
<div class="title">Input:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;product</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;brand&gt;</span>Samsung<span class="tag">&lt;/brand&gt;</span>
<span class="tag">&lt;/product&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">item</span>: {
    typePresent : payload.product.<span class="instance-variable">@type</span>?
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="error">i</span><span class="error">t</span><span class="error">e</span><span class="error">m</span>: {
    <span class="error">t</span><span class="error">y</span><span class="error">p</span><span class="error">e</span><span class="error">P</span><span class="error">r</span><span class="error">e</span><span class="error">s</span><span class="error">e</span><span class="error">n</span><span class="error">t</span>: <span class="value">true</span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use this validation operation as part of a filter:</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;users&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;name&gt;</span>Luis<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">users</span>: payload.users.name[<span class="integer">?(</span><span class="error">$</span> == <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span>)]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;users&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above selects key value pairs with value "Mariano" &#8658; {name: Mariano, name: Mariano}</p>
</div>
</div>
<div class="sect2">
<h3 id="_assert_present">3.5. Assert Present</h3>
<div class="paragraph">
<p>Returns an exception if any of the specified keys is not found.</p>
</div>
<div class="listingblock">
<div class="title">Input:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">present</span>: payload.lastName!<i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Throws an exception saying "There is no key named 'lastName'"</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_reference_elements_from_an_incoming_mule_message">3.6. Reference Elements From an Incoming Mule Message</h3>
<div class="paragraph">
<p>Often, you&#8217;ll want to use the different elements from the Mule Message that arrives to the DataWeave Transformer in your transform. The following sections show you how to reference each of these:</p>
</div>
<div class="sect3">
<h4 id="_the_payload_of_a_mule_message">3.6.1. The Payload of a Mule Message</h4>
<div class="paragraph">
<p>You can take the <strong>Payload</strong> of the mule message that reaches the DataWeave transformer and use it in your transform body.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">a</span>: payload
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also refer to sub elements of the payload through the dot syntax <code>payload.user</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the metadata for the payload&#8217;s inner contents are known to Studio, an autocomplete function will help you out.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally also define the payload as an input directive in the header, although this isn&#8217;t required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/xml
%output application/xml
---
{
  <span class="key">a</span>: payload
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_inbound_properties_from_a_mule_message">3.6.2. Inbound Properties from a Mule Message</h4>
<div class="paragraph">
<p>You can take <strong>Inbound Properties</strong> from the mule message that arrives to the DataWeave transformer and use them in your transform body. To refer to one of these, simply call it through the matching <a href="http://www.mulesoft.org/documentation/display/current/Mule+Expression+Language+MEL">MEL</a> expression.</p>
</div>
<div class="paragraph">
<p>In MEL, there are two supported syntaxes to call an inbound property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>inboundProperties.name</code></p>
</li>
<li>
<p><code>inboundProperties[’name’]</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The first method only works if the variable name doesn&#8217;t include any periods or spaces.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">a</span>: inboundProperties.userName
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the metadata about these inbound properties is known to Studio, an autocomplete function will help you out.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally also define the inbound property as a variable input directive in the header, although this isn&#8217;t required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%var inboundProperties[’userName’]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_outbound_properties_from_a_mule_message">3.6.3. Outbound Properties from a Mule Message</h4>
<div class="paragraph">
<p>You can take any <strong>Outbound Properties</strong> in the mule message that arrives to the DataWeave transformer and use it in your transform body. To refer to it, simply call it through the matching <a href="http://www.mulesoft.org/documentation/display/current/Mule+Expression+Language+MEL">MEL</a> expression.</p>
</div>
<div class="paragraph">
<p>In MEL, there are two supported syntaxes to call an outbound property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>outboundProperties.name</code></p>
</li>
<li>
<p><code>outboundProperties[’name’]</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The first method only works if the variable name doesn&#8217;t include any periods or spaces.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">a</span>: outboundProperties.userName
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the metadata about these outbound properties is known to Studio, an autocomplete function will help you out.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally also define the outbound property as a variable input directive in the header, although this isn&#8217;t required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%var outboundProperties[’userName’]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_flow_variables_from_a_mule_message">3.6.4. Flow Variables from a Mule Message</h4>
<div class="paragraph">
<p>You can take any <strong>Flow Variable</strong> in the mule message that arrives to the DataWeave transformer and use it in your transform body. To refer to it, simply call it through the matching <a href="http://www.mulesoft.org/documentation/display/current/Mule+Expression+Language+MEL">MEL</a> expression.</p>
</div>
<div class="paragraph">
<p>In MEL, there are two supported syntaxes to call a flow variable:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flowVars.name</code></p>
</li>
<li>
<p><code>flowVars[’name’]</code></p>
</li>
</ul>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The first method only works if the variable name doesn&#8217;t include any periods or spaces.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">a</span>: flowVars.userName
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If the metadata about these flow variables is known to Studio, an autocomplete function will help you out.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally also define the flow variable as a variable input directive in the header, although this isn&#8217;t required.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%var flowVars[’userName’]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_operators">4. Operators</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_map">4.1. Map</h3>
<div class="sect3">
<h4 id="_using_map_on_an_array">4.1.1. Using Map on an Array</h4>
<div class="paragraph">
<p>Returns an array that is the result of applying a transformation function (lambda) to each of the elements.
The lambda is invoked with two parameters: <strong>index</strong> and the <strong>value</strong>.
If these parameters are not named, the index is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">users</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">jhon</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">petter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">mat</span><span class="delimiter">&quot;</span></span>] map  upper <span class="error">$</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>: [
  <span class="string"><span class="delimiter">&quot;</span><span class="content">JHON</span><span class="delimiter">&quot;</span></span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">PETTER</span><span class="delimiter">&quot;</span></span>,
  <span class="string"><span class="delimiter">&quot;</span><span class="content">MAT</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the following example, custom names are defined for the index and value parameters of the map operation, and then both are used to construct the returned value. In this case value is defined as <strong>firstName</strong> and indexes in the array is defined as <strong>position</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">users</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">jhon</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">petter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">mat</span><span class="delimiter">&quot;</span></span>] map ((firstName, position) -&gt; position ++ <span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span> ++ upper firstName)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">0:JHON</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">1:PETTER</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">2:MAT</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_map_on_an_object">4.1.2. Using Map on an Object</h4>
<div class="paragraph">
<p>Returns an array with the values that result out of applying a transformation function (lambda) to each of the values in the object. The keys of the original object are all ignored by this operation and the object is treated as an array. To have access to the keys you can use the operation <strong>mapObject</strong> instead.
The lambda is invoked with two parameters: <strong>index</strong> and the <strong>value</strong>.
If these parameters are not named, the index is defined by default as <strong>$$</strong> and the value as <strong>$</strong>. The index refers to the position of a key value pair when the object is treated as an array.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;prices&gt;</span>
    <span class="tag">&lt;basic&gt;</span>9.99<span class="tag">&lt;/basic&gt;</span>
    <span class="tag">&lt;premium&gt;</span>53<span class="tag">&lt;/premium&gt;</span>
    <span class="tag">&lt;vip&gt;</span>398.99<span class="tag">&lt;/vip&gt;</span>
<span class="tag">&lt;/prices&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mapping</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var conversionRate=<span class="float">13.45</span>
---
<span class="key">priceList</span>: payload.prices map (
  <span class="string"><span class="delimiter">'</span><span class="content">$$</span><span class="delimiter">'</span></span>:{
    <span class="key">dolars</span>: <span class="global-variable">$,</span>
    <span class="key">localCurrency</span>: <span class="error">$</span> * conversionRate
  }
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">priceList</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">9.99</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">134.3655</span>
      }
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">53</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">712.85</span>
      }
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">398.99</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">5366.4155</span>
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that when you use a parameter to populate one of the keys of your output, as with the case of  in this example, you must either enclose it in quote marks or brackets. '' or ($$) are both equally valid.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example above, as key and value are not defined, they&#8217;re identified by the placeholders <strong>$$</strong> and <strong>$</strong>.
For each key:value pair in the input, an object is created and placed in an array of objects. Each of these objects contains two properties:
one of these directly uses the value, the other multiplies this value by a constant that is defined as a directive in the header.</p>
</div>
<div class="paragraph">
<p>The mapping below performs exactly the same transform, but it defines custom names for the properties of the operation, instead of using $ and $$. Here, 'position' is defined as referring to the array index, and 'money' to the value in that index.</p>
</div>
<div class="listingblock">
<div class="title">Mapping</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var conversionRate=<span class="float">13.45</span>
---
<span class="key">priceList</span>: payload.prices map ((money, position) -&gt;
  <span class="string"><span class="delimiter">'</span><span class="content">$position</span><span class="delimiter">'</span></span>:{
    <span class="key">dolars</span>: money,
    <span class="key">localCurrency</span>: money * conversionRate
  }
)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that when you use a parameter to populate one of the keys of your output, as with the case of <strong>position</strong> in this example, you must either enclose it in brackets or enclose it in quote marks adding a $ to it, otherwise the name of the property will be taken as a literal string. '$position' or (position) are both equally valid.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_map_object">4.2. Map Object</h3>
<div class="paragraph">
<p>Similar to Map, but instead of processing only the values of an object, it processes both keys and values, and instead of returning an array with the results of processing these values through the lambda, it returns an object with the key:value pairs that result from processing both key and value of the object through the lambda.</p>
</div>
<div class="paragraph">
<p>The lambda is invoked with two parameters: <strong>key</strong> and the <strong>value</strong>.
If these parameters are not named, the key is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;prices&gt;</span>
    <span class="tag">&lt;basic&gt;</span>9.99<span class="tag">&lt;/basic&gt;</span>
    <span class="tag">&lt;premium&gt;</span>53<span class="tag">&lt;/premium&gt;</span>
    <span class="tag">&lt;vip&gt;</span>398.99<span class="tag">&lt;/vip&gt;</span>
<span class="tag">&lt;/prices&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mapping</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var conversionRate=<span class="float">13.45</span>
---
<span class="key">priceList</span>: payload.prices mapObject (
  <span class="string"><span class="delimiter">'</span><span class="content">$$</span><span class="delimiter">'</span></span>:{
    <span class="key">dolars</span>: <span class="global-variable">$,</span>
    <span class="key">localCurrency</span>: <span class="error">$</span> * conversionRate
  }
)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">priceList</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">basic</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">9.99</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">134.3655</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">premium</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">53</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">712.85</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">vip</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">dolars</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">398.99</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">localCurrency</span><span class="delimiter">&quot;</span></span>: <span class="float">5366.4155</span>
    }
  }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that when you use a parameter to populate one of the keys of your output, as with the case of  in this example, you must either enclose it in quote marks or brackets. '' or ($$) are both equally valid.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the example above, as key and value are not defined, they&#8217;re identified by the placeholders <strong>$$</strong> and <strong>$</strong>.
For each key:value pair in the input, the key is preserved and the value becomes an object with two properties:
one of these is the original value, the other is the result of multiplying this value by a constant that is defined as a directive in the header.</p>
</div>
<div class="paragraph">
<p>The mapping below performs exactly the same transform, but it defines custom names for the properties of the operation, instead of using $ and $$. Here, 'category' is defined as referring to the original key in the object, and 'money' to the value in that key.</p>
</div>
<div class="listingblock">
<div class="title">Mapping</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var conversionRate=<span class="float">13.45</span>
---
<span class="key">priceList</span>: payload.prices mapObject ((money, category) -&gt;
  <span class="string"><span class="delimiter">'</span><span class="content">$category</span><span class="delimiter">'</span></span>:{
    <span class="key">dolars</span>: money,
    <span class="key">localCurrency</span>: money * conversionRate
  }
)</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Note that when you use a parameter to populate one of the keys of your output, as with the case of <strong>category</strong> in this example, you must either enclose it in brackets or enclose it in quote marks adding a $ to it, otherwise the name of the property will be taken as a literal string. '$category' or (category) are both equally valid.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_pluck">4.3. Pluck</h3>
<div class="paragraph">
<p>Pluck is useful for mapping an object into an array. Pluck is an alternate mapping mechanism to mapObject. Like mapObject, pluck executes a lambda over every key-value pair
 in its processed object, but instead of returning an object, it returns an array, which may be built from either the values or the keys in the object.</p>
</div>
<div class="paragraph">
<p>The lambda is invoked with two parameters: <strong>key</strong> and the <strong>value</strong>.
If these parameters are not named, the key is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;prices&gt;</span>
    <span class="tag">&lt;basic&gt;</span>9.99<span class="tag">&lt;/basic&gt;</span>
    <span class="tag">&lt;premium&gt;</span>53<span class="tag">&lt;/premium&gt;</span>
    <span class="tag">&lt;vip&gt;</span>398.99<span class="tag">&lt;/vip&gt;</span>
<span class="tag">&lt;/prices&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">result</span>: {
  <span class="key">keys</span>: payload.prices pluck <span class="global-variable">$$</span>,
  <span class="key">values</span>: payload.prices pluck <span class="error">$</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">keys</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">basic</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">premium</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">vip</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">values</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">9.99</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">53</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">398.99</span><span class="delimiter">&quot;</span></span>
    ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_filter">4.4. Filter</h3>
<div class="sect3">
<h4 id="_using_filter_on_an_object">4.4.1. Using Filter on an Object</h4>
<div class="paragraph">
<p>Returns an object with the key:value pairs that pass the acceptance criteria defined in the lambda.
If these parameters are not named, the key is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Mapping</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">filtered</span>: {
  <span class="key">aa</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="key">bb</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, <span class="key">cc</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="key">dd</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>
} filter <span class="error">$</span> == <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span> <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Filters the all key:value pairs with value "d" &#8658; {dd:d}</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Result</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;filtered&gt;</span>
  <span class="tag">&lt;dd&gt;</span>d<span class="tag">&lt;/dd&gt;</span>
<span class="tag">&lt;/filtered&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_filter_on_an_array">4.4.2. Using Filter on an Array</h4>
<div class="paragraph">
<p>Returns an array that only contains those that pass the criteria specified in the lambda. The lambda is invoked with two parameters: <strong>index</strong> and the <strong>value</strong>.
If these parameters are not named, the index is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">biggerThanTwo</span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>] filter <span class="error">$</span> &gt; <span class="integer">2</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">biggerThanTwo</span><span class="delimiter">&quot;</span></span>: [<span class="integer">3</span>,<span class="integer">4</span>,<span class="integer">5</span>]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_remove">4.5. Remove</h3>
<div class="sect3">
<h4 id="_using_remove_on_an_object">4.5.1. Using Remove on an Object</h4>
<div class="paragraph">
<p>When running it on an object, it returns another object where the specified keys are removed.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">myObject</span>: {<span class="key">aa</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="key">bb</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>} - <span class="string"><span class="delimiter">&quot;</span><span class="content">aa</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;myObject&gt;</span>
  <span class="tag">&lt;bb&gt;</span>b<span class="tag">&lt;/bb&gt;</span>
<span class="tag">&lt;/myObject&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example removes the key 'aa' from {aa: "a", bb: "b"} &#8658; {bb: "b"}</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_remove_on_an_array">4.5.2. Using Remove on an Array</h4>
<div class="paragraph">
<p>When running it on an array, it returns another array where the specified indexes are removed.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">aa</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>] - <span class="integer">1</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">aa</span><span class="delimiter">&quot;</span></span>: [<span class="error">a</span>, <span class="error">c</span>]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default">4.6. Default</h3>
<div class="paragraph">
<p>Assigns a default value in case no value is found in the input field.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
    <span class="key">currency</span>: payload.currency default <span class="string"><span class="delimiter">&quot;</span><span class="content">USD</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_when_otherwise">4.7. When / Otherwise</h3>
<div class="paragraph">
<p>The keyword <strong>when</strong> conditionally evaluates a part of your Dataweave code, depending on if an expression evaluates to true or to false. You can make a single line conditional, or enclose a whole section in curly brackets. In case the <strong>when</strong> expression evaluates to <strong>false</strong>, its corresponding part of the code is ignored, and the code that corresponds to the <strong>otherwise</strong> expression is executed.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
{
  <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USD</span><span class="delimiter">&quot;</span></span>
} <span class="keyword">when</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">USA</span><span class="delimiter">&quot;</span></span>
otherwise
{
      <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">EUR</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unless_otherwise">4.8. Unless / Otherwise</h3>
<div class="paragraph">
<p>The keyword <strong>unless</strong> conditionally evaluates a part of your Dataweave code, depending on if an expression evaluates to true or to false. You can make a single line conditional, or enclose a whole section in curly brackets. In case the <strong>unless</strong> expression evaluates to <strong>true</strong>, its corresponding part of the code is ignored, and the code that corresponds to the <strong>otherwise</strong> expression is executed.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
{
  <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">EUR</span><span class="delimiter">&quot;</span></span>
} <span class="keyword">unless</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">USA</span><span class="delimiter">&quot;</span></span>
otherwise
{
      <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USD</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_and">4.9. AND</h3>
<div class="paragraph">
<p>The expression <strong>and</strong> (in lower case) can be used to link multiple conditions, its use means that all of the linked conditions must evaluate to true for the expression as a whole to evaluate to true.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
{
  <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USD</span><span class="delimiter">&quot;</span></span>
} <span class="keyword">when</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">USA</span><span class="delimiter">&quot;</span></span> <span class="keyword">and</span> payload.currency == <span class="string"><span class="delimiter">&quot;</span><span class="content">local</span><span class="delimiter">&quot;</span></span>
otherwise
{
      <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">EUR</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, currency will be "EUR", unless the payload has BOTH conditions met.</p>
</div>
</div>
<div class="sect2">
<h3 id="_or">4.10. OR</h3>
<div class="paragraph">
<p>The expression <strong>or</strong> (in lower case) can be used to link multiple conditions, its use means that either one or all of the linked conditions must evaluate to true for the expression as a whole to evaluate to true.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
{
  <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">EUR</span><span class="delimiter">&quot;</span></span>
} <span class="keyword">when</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">Italy</span><span class="delimiter">&quot;</span></span> <span class="keyword">or</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">Germany</span><span class="delimiter">&quot;</span></span> <span class="keyword">or</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">Spain</span><span class="delimiter">&quot;</span></span> <span class="keyword">or</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">Portugal</span><span class="delimiter">&quot;</span></span> <span class="keyword">or</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">France</span><span class="delimiter">&quot;</span></span> <span class="keyword">or</span> payload.country == <span class="string"><span class="delimiter">&quot;</span><span class="content">Greece</span><span class="delimiter">&quot;</span></span>
otherwise
{
      <span class="key">currency</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">USD</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, currency will be "EUR", only when one of the conditions evaluates to true.</p>
</div>
</div>
<div class="sect2">
<h3 id="_concat">4.11. Concat</h3>
<div class="sect3">
<h4 id="_using_concat_on_an_object">4.11.1. Using Concat on an Object</h4>
<div class="paragraph">
<p>Returns the resulting object of concatenating two existing objects.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">concat</span>: {<span class="key">aa</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>} ++ {<span class="key">cc</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;concat&gt;</span>
  <span class="tag">&lt;aa&gt;</span>a<span class="tag">&lt;/aa&gt;</span>
  <span class="tag">&lt;cc&gt;</span>c<span class="tag">&lt;/cc&gt;</span>
<span class="tag">&lt;/concat&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The example above concatenates object {aa: a} and {cc: c} in a single one &#8658; {aa: a , cc: c}</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_concat_on_an_array">4.11.2. Using Concat on an Array</h4>
<div class="paragraph">
<p>When using arrays, it returns the resulting array of concatenating two existing arrays.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>] ++ [<span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_concat_on_a_string">4.11.3. Using Concat on a String</h4>
<div class="paragraph">
<p>Strings are treated as arrays of characters, so the operation works just the same with strings.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mule</span><span class="delimiter">&quot;</span></span> ++ <span class="string"><span class="delimiter">&quot;</span><span class="content">Soft</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="error">M</span><span class="error">u</span><span class="error">l</span><span class="error">e</span><span class="error">S</span><span class="error">o</span><span class="error">f</span><span class="error">t</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_as_type_coercion">4.12. AS (Type Coercion)</h3>
<div class="paragraph">
<p>Coerce the given value to the specified type</p>
</div>
<div class="sect3">
<h4 id="_coerce_to_string">4.12.1. Coerce to string</h4>
<div class="paragraph">
<p>Any simple types can be coerced to string. If formatting is required (i.e number or date) the format schema property can be used
.Transform</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: <span class="integer">1</span> as <span class="symbol">:string</span> {<span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">##,#</span><span class="delimiter">&quot;</span></span>},
  <span class="key">b</span>: now as <span class="symbol">:string</span> {<span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy-MM-dd</span><span class="delimiter">&quot;</span></span>},
  <span class="key">c</span>: <span class="predefined-constant">true</span> as <span class="symbol">:string</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2015-07-07</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_coerce_to_number">4.12.2. Coerce to number</h4>
<div class="paragraph">
<p>A string can be coerced to number. If the given number has a specific format the schema property can be used</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> as <span class="symbol">:number</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="error">%</span><span class="error">d</span><span class="error">w</span> <span class="float">1.0</span>
<span class="error">%</span><span class="error">o</span><span class="error">u</span><span class="error">t</span><span class="error">p</span><span class="error">u</span><span class="error">t</span> <span class="error">a</span><span class="error">p</span><span class="error">p</span><span class="error">l</span><span class="error">i</span><span class="error">c</span><span class="error">a</span><span class="error">t</span><span class="error">i</span><span class="error">o</span><span class="error">n</span><span class="error">/</span><span class="error">j</span><span class="error">s</span><span class="error">o</span><span class="error">n</span>
<span class="error">-</span><span class="error">-</span><span class="error">-</span>
{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_coerce_to_dates">4.12.3. Coerce to dates</h4>
<div class="paragraph">
<p>Date types can be coerced from string or number</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: <span class="integer">1436287232</span> as <span class="symbol">:datetime</span>,
  <span class="key">b</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2015-40-07 16:40:32.000</span><span class="delimiter">&quot;</span></span> as <span class="symbol">:localdatetime</span> {<span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">yyyy-MM-dd HH:mm:ss.SSS</span><span class="delimiter">&quot;</span></span>}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2015-40-07 16:40:32.000</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flatten">4.13. Flatten</h3>
<div class="paragraph">
<p>If you have an array of arrays, this function can flatten it into a single simple array.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
   [<span class="integer">3</span>,<span class="integer">5</span>],
   [<span class="integer">9</span>,<span class="integer">5</span>],
   [<span class="integer">154</span>,<span class="float">0.3</span>]
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%input payload application/json
%output application/json
---
flatten payload</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  <span class="integer">3</span>,
  <span class="integer">5</span>,
  <span class="integer">9</span>,
  <span class="integer">5</span>,
  <span class="integer">154</span>,
  <span class="float">0.3</span>
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_size_of">4.14. Size Of</h3>
<div class="paragraph">
<p>Returns the number of elements in an array (or anything that can be converted to an array)</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
----
{
  <span class="key">arraySize</span>: sizeOf [<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>],
  <span class="key">textSize</span>: sizeOf <span class="string"><span class="delimiter">&quot;</span><span class="content">MuleSoft</span><span class="delimiter">&quot;</span></span>,
  <span class="key">objectSize</span>: sizeOf {<span class="key">a</span>:<span class="integer">1</span>,<span class="key">b</span>:<span class="integer">2</span>}
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">arraySize</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">textSize</span><span class="delimiter">&quot;</span></span>: <span class="integer">8</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">objectSize</span><span class="delimiter">&quot;</span></span>: <span class="integer">2</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_push">4.15. Push</h3>
<div class="paragraph">
<p>Pushes a new element to the end of an array</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">aa</span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>] + <span class="integer">5</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">aa</span><span class="delimiter">&quot;</span></span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">5</span>]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reduce">4.16. Reduce</h3>
<div class="paragraph">
<p>Applies a reduction to the array. The lambda is invoked with two parameters:
the accumulator (<strong>$$</strong>) and the value (<strong>$</strong>).
Unless specified, the accumulator by default takes the first value of the array.</p>
</div>
<div class="listingblock">
<div class="title">Tranfrom</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">sum</span>: [<span class="integer">0</span>, <span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>, <span class="integer">4</span>, <span class="integer">5</span>] reduce <span class="global-variable">$$</span> + <span class="error">$</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">sum</span><span class="delimiter">&quot;</span></span>: <span class="integer">15</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">concat</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>] reduce <span class="global-variable">$$</span> ++ <span class="error">$</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">concat</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">abcd</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In some cases, you may want to not use the first element of the array as an accumulator. To set the accumulator to be something else, you must define this in a lambda.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">concat</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>] reduce ((val, acc = <span class="string"><span class="delimiter">&quot;</span><span class="content">z</span><span class="delimiter">&quot;</span></span>) -&gt; acc ++ val)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">concat</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">zabcd</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_join_by">4.17. Join By</h3>
<div class="paragraph">
<p>Merges an array into a single string value, using the provided string as a separator between elements.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">aa</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>] joinBy <span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">aa</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a-b-c</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_split_by">4.18. Split By</h3>
<div class="paragraph">
<p>Performs the opposite operation as Join By. It splits a string into an array of separate elements, looking for instances of the provided string and using it as a separator.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">split</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a-b-c</span><span class="delimiter">&quot;</span></span> splitBy <span class="string"><span class="delimiter">&quot;</span><span class="content">-</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">split</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_order_by">4.19. Order By</h3>
<div class="paragraph">
<p>Returns the provided array ordered according to the value returned by the lambda. The lambda is invoked with two parameters: <strong>index</strong> and the <strong>value</strong>.
If these parameters are not named, the index is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">orderByLeter</span>: [{ <span class="key">letter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span> }, { <span class="key">letter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span> }, { <span class="key">letter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span> }, { <span class="key">letter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span> }, { <span class="key">letter</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span> }] orderBy <span class="global-variable">$.</span>letter</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">orderByLeter</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">letter</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">e</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_group_by">4.20. Group By</h3>
<div class="paragraph">
<p>Partitions an array into a Object that contains Arrays, according to the discriminator lambda you define.
The lambda is invoked with two parameters: <strong>index</strong> and the <strong>value</strong>.
If these parameters are not named, the index is defined by default as <strong>$$</strong> and the value as <strong>$</strong>.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">langs</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Foo</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bar</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Scala</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">FooBar</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="string"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: payload.langs groupBy <span class="global-variable">$.</span>language</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">Scala</span><span class="delimiter">&quot;</span></span>: [
        {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Bar</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Scala</span><span class="delimiter">&quot;</span></span>}
      ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>: [
        {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Foo</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>},
        {<span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">FooBar</span><span class="delimiter">&quot;</span></span>, <span class="key"><span class="delimiter">&quot;</span><span class="content">language</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Java</span><span class="delimiter">&quot;</span></span>}
      ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_distinct_by">4.21. Distinct By</h3>
<div class="paragraph">
<p>Returns only unique values from an array that may have duplicates.
The lambda is invoked with two parameters: <strong>index</strong> and <strong>value</strong>.
If these parameters are not defined, If these parameters are not named, the index is defined by default as $$ and the value as $.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">XQuery Kick Start</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">James McGovern</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Per Bothner</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">James Linn</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">Vaidyanathan Nagarajan</span><span class="delimiter">&quot;</span></span>
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">2000</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{

          book : {
      title : payload.title,
      <span class="key">year</span>: payload.year,
      <span class="key">authors</span>: payload.author distinctBy <span class="error">$</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">XQuery Kick Start</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2000</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">authors</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">James McGovern</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">Per Bothner</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">James Linn</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">Vaidyanathan Nagarajan</span><span class="delimiter">&quot;</span></span>
    ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replace">4.22. Replace</h3>
<div class="paragraph">
<p>Replaces a section of a string for another, in accordance to a regular expression, and returns a modified string</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">b</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">admin123</span><span class="delimiter">&quot;</span></span> replace <span class="regexp"><span class="delimiter">/</span><span class="content">(</span><span class="char">\d</span><span class="content">+)</span><span class="delimiter">/</span></span> with <span class="string"><span class="delimiter">&quot;</span><span class="content">ID</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">adminID</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_matches">4.23. Matches</h3>
<div class="paragraph">
<p>Matches a string against a regular expression, and returns <strong>true</strong> or <strong>false</strong></p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">b</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">admin123</span><span class="delimiter">&quot;</span></span> matches <span class="regexp"><span class="delimiter">/</span><span class="content">(</span><span class="char">\d</span><span class="content">+)</span><span class="delimiter">/</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_similar">4.24. Similar</h3>
<div class="paragraph">
<p>Evaluates if two values are similar, regardless of their type. For example, the string "1234" and the number 1234 aren&#8217;t equal, but they are recognized as similar.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
    <span class="key">a</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1234</span><span class="delimiter">&quot;</span></span> == <span class="integer">1234</span>,
    <span class="key">b</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1234</span><span class="delimiter">&quot;</span></span> ~= <span class="integer">1234</span>,
    <span class="key">c</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> == <span class="predefined-constant">true</span>,
    <span class="key">d</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> ~= <span class="predefined-constant">true</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_upper">4.25. Upper</h3>
<div class="paragraph">
<p>Returns the provided string in uppercase characters</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">name</span>: upper <span class="string"><span class="delimiter">&quot;</span><span class="content">mulesoft</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="error">M</span><span class="error">U</span><span class="error">L</span><span class="error">E</span><span class="error">S</span><span class="error">O</span><span class="error">F</span><span class="error">T</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_lower">4.26. Lower</h3>
<div class="paragraph">
<p>Returns the provided string in lowercase characters</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">name</span>: lower <span class="string"><span class="delimiter">&quot;</span><span class="content">MULESOFT</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="error">m</span><span class="error">u</span><span class="error">l</span><span class="error">e</span><span class="error">s</span><span class="error">o</span><span class="error">f</span><span class="error">t</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_camelize">4.27. Camelize</h3>
<div class="paragraph">
<p>Returns the provided string in camel case</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: camelize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: camelize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_first_name</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: camelize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer name</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customerFirstName</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer name</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_capitalize">4.28. Capitalize</h3>
<div class="paragraph">
<p>Returns the provided string with every word starting with a capital letter and no underscores.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: capitalize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: capitalize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_first_name</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: capitalize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer NAME</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Customer First Name</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Customer Name</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dasherize">4.29. Dasherize</h3>
<div class="paragraph">
<p>Returns the provided string with every word separated by a dash.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: dasherize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: dasherize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_first_name</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: dasherize <span class="string"><span class="delimiter">&quot;</span><span class="content">customer NAME</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer-first-name</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer-NAME</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_underscore">4.30. Underscore</h3>
<div class="paragraph">
<p>Returns the provided string with every word separated by an underscore.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: underscore <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: underscore <span class="string"><span class="delimiter">&quot;</span><span class="content">customer-first-name</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: underscore <span class="string"><span class="delimiter">&quot;</span><span class="content">customer NAME</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_first_name</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">customer_NAME</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ordinalize">4.31. Ordinalize</h3>
<div class="paragraph">
<p>Returns the provided numbers set as ordinals.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: ordinalize <span class="integer">1</span>,
  <span class="key">b</span>: ordinalize <span class="integer">8</span>,
  <span class="key">c</span>: ordinalize <span class="integer">103</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1st</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">8th</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">103rd</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pluralize">4.32. Pluralize</h3>
<div class="paragraph">
<p>Returns the provided string transformed into its plural form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">box</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">wife</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">foot</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">boxes</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">wives</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">feet</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_singularize">4.33. Singularize</h3>
<div class="paragraph">
<p>Returns the provided string transformed into its singular form.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">boxes</span><span class="delimiter">&quot;</span></span>,
  <span class="key">b</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">wives</span><span class="delimiter">&quot;</span></span>,
  <span class="key">c</span>: pluralize <span class="string"><span class="delimiter">&quot;</span><span class="content">feet</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">box</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">wife</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">foot</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_basic_math_operations">4.34. Basic Math Operations</h3>
<div class="sect3">
<h4 id="_sum">4.34.1. Sum</h4>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
plus : <span class="integer">2</span> + <span class="float">2.5</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_minus">4.34.2. Minus</h4>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
minus : <span class="float">2.5</span> - <span class="integer">2</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_multiply">4.34.3. Multiply</h4>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
multiply : <span class="float">2.5</span> * <span class="integer">2</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_division">4.34.4. Division</h4>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
division : <span class="integer">10</span> / <span class="integer">2</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_max">4.34.5. Max</h4>
<div class="paragraph">
<p>Returns the highest number in an array or object.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: max [<span class="integer">1</span>..<span class="integer">1000</span>],
  <span class="key">b</span>: max [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>],
  <span class="key">d</span>: max [<span class="float">1.5</span>, <span class="float">2.5</span>, <span class="float">3.5</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="integer">1000</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>: <span class="float">3.5</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_min">4.34.6. Min</h4>
<div class="paragraph">
<p>Returns the lowest number in an array or object.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: min [<span class="integer">1</span>..<span class="integer">1000</span>],
  <span class="key">b</span>: min [<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>],
  <span class="key">d</span>: min [<span class="float">1.5</span>, <span class="float">2.5</span>, <span class="float">3.5</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>: <span class="float">1.5</span>
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_date_time_operations">4.35. Date Time Operations</h3>
<div class="sect3">
<h4 id="_now">4.35.1. Now</h4>
<div class="paragraph">
<p>Returns a time stap</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: now,
  <span class="key">b</span>: now.day,
  <span class="key">c</span>: now.minutes
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="error">|</span><span class="integer">2015</span><span class="integer">-0</span><span class="integer">5</span><span class="integer">-22</span><span class="error">|</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="integer">22</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="integer">57</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_append_time_zone">4.35.2. Append Time Zone</h4>
<div class="paragraph">
<p>Appends a time zone to a date type value</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">a</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>| ++ |<span class="integer">-03</span>:<span class="integer">00</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003-10-01T23:57:59-03:00</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_shift_time_zone">4.35.3. Shift Time Zone</h4>
<div class="paragraph">
<p>Shift a date time to the specified timezone</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">a</span>: |<span class="integer">2014</span>-<span class="integer">01</span>-<span class="integer">01</span><span class="key">T14</span>:<span class="integer">00</span>-<span class="integer">03</span>:<span class="integer">00</span>| &gt;&gt; |<span class="integer">-08</span>:<span class="integer">00</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2014-01-01T09:00-08:00</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_adding_a_period_of_time">4.35.4. Adding a Period of Time</h4>
<div class="paragraph">
<p>Add or subtract a period of time from a given date.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">c</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>| + |<span class="constant">P1Y</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2004-10-01T23:57:59Z</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_global_mel_functions">4.35.5. Global MEL Functions</h4>
<div class="paragraph">
<p>Your DataWeave code can call any function you define as a global <a href="https://developer.mulesoft.com/docs/display/current/Mule+Expression+Language+MEL">Mule Expression Language (MEL)</a> function, as long as it is correctly defined in the Mule Project where your Transform Message element sits.</p>
</div>
<div class="paragraph">
<p>Refer to <a href="https://developer.mulesoft.com/docs/display/current/Using+DataWeave+in+Studio">DataWeave in Studio</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_object">5. Object</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':object'</p>
</div>
<div class="paragraph">
<p>Objects are represented as a collection of key:value pairs.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Object: { 'Key' : Value }</p>
</li>
<li>
<p>Key : 'Qualified Name' @('Qualified Name'= Value,&#8230;&#8203;)</p>
</li>
<li>
<p>Qualified Name: 'namespace prefix#name' where the 'namespace prefix#' part is optional</p>
</li>
<li>
<p>Name: String that represents the name.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Strings must be double quoted to be recognized as strings.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_special_types_of_objects">5.1. Special Types of Objects</h3>
<div class="sect3">
<h4 id="_single_value_objects">5.1.1. Single Value Objects</h4>
<div class="paragraph">
<p>If an Object has only one key:value pair, the enclosing curly brackets { } are not required:</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conditional_elements">5.1.2. Conditional Elements</h4>
<div class="paragraph">
<p>Objects can define conditional key:value pairs based on a conditional expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
<span class="key">file</span>: {
  <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">transform</span><span class="delimiter">&quot;</span></span>,
  (<span class="key">extension</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">zip</span><span class="delimiter">&quot;</span></span>) <span class="keyword">when</span> payload.fileSystem?
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example outputs an additional field called "extension" only when the fileSystem property is present in payload (this field may contain any value, not just "true").</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;file&gt;</span>
  <span class="tag">&lt;name&gt;</span>transform<span class="tag">&lt;/name&gt;</span>
  <span class="tag">&lt;extension&gt;</span>zip<span class="tag">&lt;/extension&gt;</span>
<span class="tag">&lt;/file&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If absent</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;file&gt;</span>
  <span class="tag">&lt;name&gt;</span>transform<span class="tag">&lt;/name&gt;</span>
<span class="tag">&lt;/file&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dynamic_elements">5.1.3. Dynamic elements</h4>
<div class="paragraph">
<p>Dynamic elements allow you to add the result of an expression as key-value pairs of an object.</p>
</div>
<div class="paragraph">
<p>link:anypoint  <a href="http://www.mulesoft.org/documentation/display/current/Creating+an+Anypoint+Connector+Project">Creating an Anypoint Connector Project</a></p>
</div>
<div class="paragraph">
<p>Transform</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,
  ([<span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>] map {<span class="string"><span class="delimiter">'</span><span class="content">$</span><span class="delimiter">'</span></span>: <span class="error">$</span>})
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Output</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">b</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">d</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_array">6. Array</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':array'</p>
</div>
<div class="paragraph">
<p>An array represents a list of values.
Literal arrays are represented by a sequence of expressions separated by "," enclosed in "[" "]"</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby"><span class="comment">#Array Of Strings</span>
[<span class="string"><span class="delimiter">&quot;</span><span class="content">Foo</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Bar</span><span class="delimiter">&quot;</span></span>]</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_dynamic_arrays">6.1. Dynamic arrays</h3>
<div class="paragraph">
<p>Dynamic arrays allows to include an element based on a condition.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">[<span class="string"><span class="delimiter">&quot;</span><span class="content">Foo</span><span class="delimiter">&quot;</span></span>,(<span class="string"><span class="delimiter">&quot;</span><span class="content">Next</span><span class="delimiter">&quot;</span></span>) <span class="keyword">when</span> payload.hasNext]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, "Next" will only be added to the list if the value of "hasNext" in the incoming payload is "true".</p>
</div>
</div>
<div class="sect2">
<h3 id="_selectors_2">6.2. Selectors</h3>
<div class="sect3">
<h4 id="_index_selector">6.2.1. Index selector</h4>
<div class="paragraph">
<p>Selects the element at a given position using "[]".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the index is greater than or equal to 0, it will start counting from the beginning.</p>
</li>
<li>
<p>If the index is negative, it will start counting from the end.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">first</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>][<span class="integer">0</span>],
  <span class="key">last</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>][<span class="integer">-1</span>],
  <span class="key">penultimate</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>,<span class="integer">3</span>,<span class="integer">4</span>][<span class="integer">-2</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">first</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>: <span class="integer">4</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">penultimate</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_range_selector_2">6.2.2. Range selector</h4>
<div class="paragraph">
<p>Selects the elements specified by the range in that specific order. This selector allows to slice an array or invert it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">slice</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>][<span class="integer">0</span>..<span class="integer">2</span>],
  <span class="key">reverted</span>: [<span class="integer">0</span>,<span class="integer">1</span>,<span class="integer">2</span>][<span class="integer">-1</span>..<span class="integer">0</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">slice</span><span class="delimiter">&quot;</span></span>: [<span class="integer">0</span>,<span class="integer">1</span>],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">reverted</span><span class="delimiter">&quot;</span></span>: [<span class="integer">2</span>,<span class="integer">1</span>,<span class="integer">0</span>]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_string">7. String</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':string'</p>
</div>
<div class="paragraph">
<p>A string can be defined by the use of double quotes or single quotes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">{
  <span class="key">doubleQuoted</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>,
  <span class="key">singleQuoted</span>: <span class="string"><span class="delimiter">'</span><span class="content">Hello</span><span class="delimiter">'</span></span>,
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_string_interpolation">7.1. String interpolation</h3>
<div class="paragraph">
<p>String interpolation allows you to embed variables or expressions directly in a string.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var name = <span class="string"><span class="delimiter">&quot;</span><span class="content">Shoki</span><span class="delimiter">&quot;</span></span>
---
{
    <span class="key">Greeting</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi, my name is $name</span><span class="delimiter">&quot;</span></span>,
    <span class="key">Sum</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1 + 1 = $(1 + 1)</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">Greeting</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi, my name is Shoki</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">Sum</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1 + 1 = 2</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_selectors_3">7.2. Selectors</h3>
<div class="sect3">
<h4 id="_index_selector_2">7.2.1. Index selector</h4>
<div class="paragraph">
<p>Selects the character at a given position using "[]".</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the index is bigger or equals to 0, it will start counting from the beginning.</p>
</li>
<li>
<p>If the index is negative, it will start counting from the end.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Emiliano</span><span class="delimiter">&quot;</span></span>[<span class="integer">0</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">E</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_number">8. Number</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':number'</p>
</div>
<div class="paragraph">
<p>There is only one number type that supports both floating point and integer numbers.
There is no loss of precision in any operation, the engine always stores the data in the most performant way that doesn&#8217;t compromise precision.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_boolean">9. Boolean</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':boolean'</p>
</div>
<div class="paragraph">
<p>A boolean is defined by the keywords 'true' and 'false'</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dates">10. Dates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Dates in DataWeave follow the <a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">ISO-8601 standard</a> and are defined between '|' characters.
The date system supports:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DateTime</p>
</li>
<li>
<p>Local DateTime</p>
</li>
<li>
<p>Time</p>
</li>
<li>
<p>Local Time</p>
</li>
<li>
<p>Period</p>
</li>
<li>
<p>TimeZone</p>
</li>
<li>
<p>Date</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_date">10.1. Date</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':date'</p>
</div>
<div class="paragraph">
<p>Represented as 'Year'-'Month'-'Date'</p>
</div>
<div class="paragraph">
<p>The type <strong>Date</strong> has no time component at all (not even midnight).</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">c</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003-10-01</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_time">10.2. Time</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':time'</p>
</div>
<div class="paragraph">
<p>Represented as 'Hour':'Minutes':'Seconds'.'Milliseconds'</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">c</span>: |<span class="integer">23</span>:<span class="integer">59</span>:<span class="integer">56</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">23:59:56</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_timezone">10.3. TimeZone</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':timeZone'</p>
</div>
<div class="paragraph">
<p>Timezones must include a + or a - to be defined as such. |03:00| is a time, |+03:00| is a timezone.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">c</span>: |<span class="integer">-08</span>:<span class="integer">00</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">c</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">-08:00</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_datetime">10.4. DateTime</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':datetime'</p>
</div>
<div class="paragraph">
<p>Date time is the conjunction of 'Date' + 'Time' + 'TimeZone'.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">a</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>-<span class="integer">03</span>:<span class="integer">00</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003-10-01T23:57:59-03:00</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_local_date_time">10.5. Local Date Time</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':localdatetime'</p>
</div>
<div class="paragraph">
<p>Date time is the conjunction of 'Date' + 'Time'. Local timezone to use.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">a</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003-10-01T23:57:59</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_period">10.6. Period</h3>
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':period'</p>
</div>
<div class="paragraph">
<p>Specifies a period of time. Examples |PT9M| &#8658; 9 minutes , |P1Y| &#8658; 1 Year</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">a</span>: |<span class="integer">23</span>:<span class="integer">59</span>:<span class="integer">56</span>| + |<span class="constant">PT9M</span>|</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">00:08:56</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessors">10.7. Accessors</h3>
<div class="paragraph">
<p>In order to access the different parts of the date, special selectors must be used</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">day</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.day,
  <span class="key">month</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.month,
  <span class="key">year</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.year,
  <span class="key">hour</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.hour,
  <span class="key">minutes</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.minutes,
  <span class="key">seconds</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.seconds,
  <span class="key">offsetSeconds</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>-<span class="integer">03</span>:<span class="integer">00</span>|.offsetSeconds,
  <span class="key">nanoseconds</span>: |<span class="integer">23</span>:<span class="integer">57</span>:<span class="float">59.700</span>|.nanoseconds,
  <span class="key">milliseconds</span>: |<span class="integer">23</span>:<span class="integer">57</span>:<span class="float">59.700</span>|.milliseconds,
  <span class="key">dayOfWeek</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.dayOfWeek,
  <span class="key">dayOfYear</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span><span class="constant">Z</span>|.dayOfYear
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">day</span><span class="delimiter">&quot;</span></span>: <span class="integer">1</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">month</span><span class="delimiter">&quot;</span></span>: <span class="integer">10</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2003</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">hour</span><span class="delimiter">&quot;</span></span>: <span class="integer">23</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">minutes</span><span class="delimiter">&quot;</span></span>: <span class="integer">57</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">seconds</span><span class="delimiter">&quot;</span></span>: <span class="integer">59</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">offsetSeconds</span><span class="delimiter">&quot;</span></span>: <span class="integer">-10800</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">nanoseconds</span><span class="delimiter">&quot;</span></span>: <span class="integer">700000000</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">milliseconds</span><span class="delimiter">&quot;</span></span>: <span class="integer">700</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dayOfWeek</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">dayOfYear</span><span class="delimiter">&quot;</span></span>: <span class="integer">274</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_changing_the_format_of_a_date">10.8. Changing the Format of a Date</h3>
<div class="paragraph">
<p>You can specify a date to be in any format you prefer through using <strong>as</strong> in the following way:</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">formatedDate</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>| as <span class="symbol">:string</span> {<span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">YYYY-MM-dd</span><span class="delimiter">&quot;</span></span>}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">formatedDate</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003-10-01</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;ll be doing multiple similar conversions in your transform, you might want to define a custom type as a directive in the header and set each date as being of that type.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%type mydate = <span class="symbol">:string</span> { <span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">YYYY/MM/dd</span><span class="delimiter">&quot;</span></span> }
---
{
  <span class="key">formatedDate1</span>: |<span class="integer">2003</span>-<span class="integer">10</span>-<span class="integer">01</span><span class="key">T23</span>:<span class="integer">57</span>:<span class="integer">59</span>| as <span class="symbol">:mydate</span>,
  <span class="key">formatedDate2</span>: |<span class="integer">2015</span>-<span class="integer">07</span>-<span class="integer">06</span><span class="key">T08</span>:<span class="integer">53</span>:<span class="integer">15</span>| as <span class="symbol">:mydate</span>
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">formatedDate1</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2003/10/01</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">formatedDate2</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2015/07/06</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_regular_expressions">11. Regular Expressions</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Type</strong> &#8658; ':regex'</p>
</div>
<div class="paragraph">
<p>Regular Expressions are defined between /. For example /(\d+)/ for represents multiple numerical digits from 0-9.
These may be used as arguments in certain operations that act upon strings, like Matches or Replace, or on operations that act upon objects and arrays, such as filters.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_custom_types">12. Custom Types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can define your own custom types in the header of your transform, then in the body you can define an element as being of that type.</p>
</div>
<div class="paragraph">
<p>To do so, the directive must be structured as following <code>%type name = java definition</code></p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%type currency = <span class="symbol">:number</span> { <span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">##</span><span class="delimiter">&quot;</span></span>}
%type user = <span class="symbol">:object</span> { <span class="key">class</span>: “my.company.User”}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Usually it&#8217;s a good idea to extend an existing type rather than creating one from scratch.</p>
</div>
<div class="paragraph">
<p>For example, above <code>:string</code> defines <code>currency</code> as extending the string type.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To then assign an element as being of the custom type you defined, use the operation <code>as :type</code> after defining a field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%type currency = <span class="symbol">:number</span> { <span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">##</span><span class="delimiter">&quot;</span></span>}
%type user = <span class="symbol">:object</span> { <span class="key">class</span>: “my.company.User”}
---
<span class="key">customer</span>:payload.user as <span class="symbol">:user</span></code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_defining_types_as_a_hint_for_developers">12.1. Defining Types as a Hint for Developers</h3>
<div class="paragraph">
<p>In Anypoint Studio, it&#8217;s easy to view metadata that describes the input and output data of every building block you&#8217;re using. When defining a custom type for a particular input or output of your transform, this is represented in the DataWeave transformer&#8217;s metadata.
Exposing metadata helps developers understand what it is they&#8217;re integrating to in order to build up the rest of a system, as it lets them know what they need to provide and what they can expect in advance.</p>
</div>
<div class="sect3">
<h4 id="_java">12.1.1. Java</h4>
<div class="sect4">
<h5 id="_class">Class</h5>
<div class="paragraph">
<p>Java developers use the 'class' metadata key as hint for what class needs to be created and sent in.
If this is not explicitly defined, DataWeave will try to infer from the context or it will assign it the default values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>java.util.HashMap for <strong>objects</strong></p>
</li>
<li>
<p>java.util.ArrayList for <strong>lists</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%type user = <span class="symbol">:object</span> { <span class="key">class</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">com.anypoint.df.pojo.User</span><span class="delimiter">&quot;</span></span>}
%output application/xml
---
{
  name : <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span>,
  age : <span class="integer">31</span>
} as <span class="symbol">:user</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above code defines your type as an instance of 'com.anypoint.df.pojo.User'.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_xml">12.1.2. Xml</h4>
<div class="sect4">
<h5 id="_cdata">CDATA</h5>
<div class="paragraph">
<p>Xml specifies a new type called <strong>:cdata</strong> that inherits from <strong>:string</strong>. Using this type will output a CDATA structure.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">users</span>:
  {
    user : <span class="string"><span class="delimiter">&quot;</span><span class="content">Mariano</span><span class="delimiter">&quot;</span></span> as <span class="symbol">:cdata</span>,
    age : <span class="integer">31</span> as <span class="symbol">:cdata</span>
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;users&gt;</span>
  <span class="tag">&lt;user&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>Mariano<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/user&gt;</span>
  <span class="tag">&lt;age&gt;</span><span class="inline-delimiter">&lt;![CDATA[</span>31<span class="inline-delimiter">]]&gt;</span><span class="tag">&lt;/age&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_defining_types_for_type_coercion">12.2. Defining Types For Type Coercion</h3>
<div class="sect3">
<h4 id="_format">12.2.1. Format</h4>
<div class="paragraph">
<p>The metadata 'format' key is used for formatting numbers and dates</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;items&gt;</span>
    <span class="tag">&lt;item&gt;</span>
        <span class="tag">&lt;price&gt;</span>22.30<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/item&gt;</span>
    <span class="tag">&lt;item&gt;</span>
        <span class="tag">&lt;price&gt;</span>20.31<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/item&gt;</span>
<span class="tag">&lt;/items&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%type currency = <span class="symbol">:number</span> { <span class="key">format</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">##</span><span class="delimiter">&quot;</span></span>}
---
<span class="key">books</span>: payload.items.*item map
    <span class="key">book</span>:
        <span class="key">price</span>: <span class="global-variable">$.</span>price as <span class="symbol">:currency</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="integer">22</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="integer">20</span>
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_separator">12.2.2. Separator</h4>
<div class="paragraph">
<p>The metadata 'separator' key is used for splitting and joining arrays into strings and viceversa.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%type myList = <span class="symbol">:array</span> {<span class="key">separator</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">,</span><span class="delimiter">&quot;</span></span>}
---
<span class="key">books</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">name,last name,address</span><span class="delimiter">&quot;</span></span> as <span class="symbol">:array</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">books</span><span class="delimiter">&quot;</span></span>: [
    <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">last name</span><span class="delimiter">&quot;</span></span>,
    <span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions_and_lambdas">13. Functions and Lambdas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two types of directives you can use to define a function, through %var (as with variables) using a lambda, or through %function.</p>
</div>
<div class="sect2">
<h3 id="_lambdas">13.1. Lambdas</h3>
<div class="paragraph">
<p>Lambdas can be used inside operators such as map, mapObject, etc or they can be assign to a variable.
When using them with an operator it can be either named or anonymous.
=== Assign to a var
.Transport</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%var toUser = (user) -&gt; {<span class="key">firstName</span>: user.givenName, <span class="key">lastName</span>: user.sn}
---
{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span> : toUser({ givenName : <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>, sn : <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span> })
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_named_with_an_operator">13.1.1. Named with an operator</h4>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">users</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">jhon</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">petter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">mat</span><span class="delimiter">&quot;</span></span>] map ((name) -&gt;  upper name)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">JHON</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">PETTER</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">MAT</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_anonymous_with_an_operator">13.1.2. Anonymous with an operator</h4>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
<span class="key">users</span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">jhon</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">petter</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">mat</span><span class="delimiter">&quot;</span></span>] map  upper <span class="error">$</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span>: [<span class="string"><span class="delimiter">&quot;</span><span class="content">JHON</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">PETTER</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">MAT</span><span class="delimiter">&quot;</span></span>]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functions">13.2. Functions</h3>
<div class="paragraph">
<p>You can declare functions in the Header and these can be invoked at any point in the Body. You refer to them as you do to any variable or constant: using the form <strong>$&lt;function-name&gt;()</strong> passing an expression as argument. The result of the expression that is passed as an argument is used in the execution of the function body.</p>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
%function toUser(user){<span class="key">firstName</span>: user.givenName, <span class="key">lastName</span>: user.sn}
---
{
  <span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span> : toUser({ givenName : <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>, sn : <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span> })
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Annie</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">lastName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Point</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_existing_functions">13.3. Existing Functions</h3>
<div class="sect3">
<h4 id="_expressions_that_call_external_flows">13.3.1. Expressions that Call External Flows</h4>
<div class="paragraph">
<p>From a DataWeave transform, you can trigger the calling of a different flow in your Mule application, and whatever the flow returns will be what the expression returns.</p>
</div>
<div class="paragraph">
<p>You can do this through the following expression:</p>
</div>
<div class="paragraph">
<p><code>lookup(“flowName”,$)</code></p>
</div>
<div class="paragraph">
<p>Which takes two parmeters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The name of the flow that must be called</p>
</li>
<li>
<p>The payload to send to this flow, as a map</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Transform</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/json
---
{
  <span class="key">a</span>: lookup(<span class="string"><span class="delimiter">&quot;</span><span class="content">mySecondFlow</span><span class="delimiter">&quot;</span></span>,{<span class="key">b</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>})
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Mule Flow</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="XML"><span class="tag">&lt;flow</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">mySecondFlow</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;set-payload</span> <span class="attribute-name">doc:name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Set Payload</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">#[payload + ' world!' ]</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/flow&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="JSON">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">a</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hello world!</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_accessing_properties">13.3.2. Accessing Properties</h4>
<div class="paragraph">
<p>You can reference any <strong>Property</strong> (System or Spring) that exists in the server while DataWeave is processing your transformation, to do so use the <strong>p('prop_name')</strong> function.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="ruby">%dw <span class="float">1.0</span>
%output application/xml
---
{
  <span class="key">a</span>: p(<span class="string"><span class="delimiter">'</span><span class="content">userName</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">14. Examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_basic">14.1. Basic</h3>
<div class="paragraph">
<p>Basic xml mapping example uses
.Features</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Value access by key</p>
</li>
<li>
<p>Map operator in order to transform input into output structure</p>
</li>
<li>
<p>With operator to set a variable in a scope</p>
</li>
<li>
<p>Format a value using metadata.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;invoice&gt;</span>
    <span class="tag">&lt;header&gt;</span>
        <span class="tag">&lt;customer_name&gt;</span>ACME, Inc.<span class="tag">&lt;/customer_name&gt;</span>
        <span class="tag">&lt;customer_state&gt;</span>CA<span class="tag">&lt;/customer_state&gt;</span>
    <span class="tag">&lt;/header&gt;</span>
    <span class="tag">&lt;items&gt;</span>
        <span class="tag">&lt;item&gt;</span>
            <span class="tag">&lt;description&gt;</span>Product 1<span class="tag">&lt;/description&gt;</span>
            <span class="tag">&lt;quantity&gt;</span>2<span class="tag">&lt;/quantity&gt;</span>
            <span class="tag">&lt;unit_price&gt;</span>10<span class="tag">&lt;/unit_price&gt;</span>
        <span class="tag">&lt;/item&gt;</span>
        <span class="tag">&lt;item&gt;</span>
            <span class="tag">&lt;description&gt;</span>Product 2<span class="tag">&lt;/description&gt;</span>
            <span class="tag">&lt;quantity&gt;</span>1<span class="tag">&lt;/quantity&gt;</span>
            <span class="tag">&lt;unit_price&gt;</span>30<span class="tag">&lt;/unit_price&gt;</span>
        <span class="tag">&lt;/item&gt;</span>
    <span class="tag">&lt;/items&gt;</span>
<span class="tag">&lt;/invoice&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/xml
%output application/xml
%var tax=0.085
%var discount=0.05
---
invoice: {
    header: payload.invoice.header,
    items: { (payload.invoice.items.*item map {
        item @(index: $$ + 1): {
            description: $.description,
            quantity: $.quantity,
            unit_price: $.unit_price,
            discount: (discount * 100) as :number { format: "##" } ++ "%",
            subtotal: $.unit_price * $.quantity[0] * (1 - discount[0])
        }
    }) },
    totals: using (subtotal = payload.invoice.items.*item reduce ((item, sum1 = 0) -&gt; sum1 + (item.unit_price * item.quantity * (1 - discount)))) {
        subtotal: subtotal,
        tax: (tax * 100) as :number { format: "##.#" } ++ "%",
        total: subtotal * (1 + tax)
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;invoice&gt;</span>
    <span class="tag">&lt;header&gt;</span>
        <span class="tag">&lt;customer_name&gt;</span>ACME, Inc.<span class="tag">&lt;/customer_name&gt;</span>
        <span class="tag">&lt;customer_state&gt;</span>CA<span class="tag">&lt;/customer_state&gt;</span>
    <span class="tag">&lt;/header&gt;</span>
    <span class="tag">&lt;items&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">index</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;description&gt;</span>Product 1<span class="tag">&lt;/description&gt;</span>
            <span class="tag">&lt;quantity&gt;</span>2<span class="tag">&lt;/quantity&gt;</span>
            <span class="tag">&lt;unit_price&gt;</span>10<span class="tag">&lt;/unit_price&gt;</span>
            <span class="tag">&lt;discount&gt;</span>5%<span class="tag">&lt;/discount&gt;</span>
            <span class="tag">&lt;subtotal&gt;</span>20<span class="tag">&lt;/subtotal&gt;</span>
        <span class="tag">&lt;/item&gt;</span>
        <span class="tag">&lt;item</span> <span class="attribute-name">index</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;description&gt;</span>Product 2<span class="tag">&lt;/description&gt;</span>
            <span class="tag">&lt;quantity&gt;</span>1<span class="tag">&lt;/quantity&gt;</span>
            <span class="tag">&lt;unit_price&gt;</span>30<span class="tag">&lt;/unit_price&gt;</span>
            <span class="tag">&lt;discount&gt;</span>5%<span class="tag">&lt;/discount&gt;</span>
            <span class="tag">&lt;subtotal&gt;</span>30<span class="tag">&lt;/subtotal&gt;</span>
        <span class="tag">&lt;/item&gt;</span>
    <span class="tag">&lt;/items&gt;</span>
    <span class="tag">&lt;totals&gt;</span>
        <span class="tag">&lt;subtotal&gt;</span>47.50<span class="tag">&lt;/subtotal&gt;</span>
        <span class="tag">&lt;tax&gt;</span>8.5%<span class="tag">&lt;/tax&gt;</span>
        <span class="tag">&lt;total&gt;</span>51.53750<span class="tag">&lt;/total&gt;</span>
    <span class="tag">&lt;/totals&gt;</span>
<span class="tag">&lt;/invoice&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_to_xml">14.2. Json to Xml</h3>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="integer">30</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Everyday Italian</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Giada De Laurentiis</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2005</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">29.99</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Harry Potter</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">J K. Rowling</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2005</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">49.99</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">XQuery Kick Start</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">James McGovern</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Per Bothner</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">James Linn</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Vaidyanathan Nagarajan</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2003</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">39.95</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Learning XML</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Erik T. Ray</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2003</span>
      }
    }
  }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/json
%output application/xml
---
{
  bookstore: { (payload map {
  	book : {
      title @(lang: "en"): $.item.properties.title,
      year: $.item.properties.year,
      price: $.item.price,
      ($.item.properties.author map
      author @(loc: "US"): $)
    }
  }) }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;bookstore&gt;</span>
    <span class="tag">&lt;book&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Everyday Italian<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;year&gt;</span>2005<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>30<span class="tag">&lt;/price&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Giada De Laurentiis<span class="tag">&lt;/author&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Harry Potter<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;year&gt;</span>2005<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>29.99<span class="tag">&lt;/price&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>J K. Rowling<span class="tag">&lt;/author&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>XQuery Kick Start<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;year&gt;</span>2003<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>49.99<span class="tag">&lt;/price&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>James McGovern<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Per Bothner<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Kurt Cagle<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>James Linn<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Vaidyanathan Nagarajan<span class="tag">&lt;/author&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Learning XML<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;year&gt;</span>2003<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>39.95<span class="tag">&lt;/price&gt;</span>
        <span class="tag">&lt;author</span> <span class="attribute-name">loc</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">US</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Erik T. Ray<span class="tag">&lt;/author&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
<span class="tag">&lt;/bookstore&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_to_json">14.3. XML To Json</h3>
<div class="paragraph">
<p>Transforms a webservice response into a json.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;ns0:getItemsResponse</span> <span class="attribute-name">xmlns:ns0</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/message/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;ns0:PageInfo&gt;</span>
        <span class="tag">&lt;pageIndex&gt;</span>0<span class="tag">&lt;/pageIndex&gt;</span>
        <span class="tag">&lt;pageSize&gt;</span>20<span class="tag">&lt;/pageSize&gt;</span>
    <span class="tag">&lt;/ns0:PageInfo&gt;</span>
    <span class="tag">&lt;ns1:Item</span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/model/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;id&gt;</span>B0015BYNRO<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;type&gt;</span>Oils<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;name&gt;</span>Now Foods LANOLIN PURE<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;images&gt;</span>
            <span class="tag">&lt;image</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://ecx.images-amazon.com/images/I/11Qoe774Q4L._SL30_.jpg
            <span class="tag">&lt;/image&gt;</span>
        <span class="tag">&lt;/images&gt;</span>
    <span class="tag">&lt;/ns1:Item&gt;</span>
    <span class="tag">&lt;ns1:Item</span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/model/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;id&gt;</span>B002K8AD02<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;type&gt;</span>Bubble Bath<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;name&gt;</span>Deep Steep Honey Bubble Bath<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;summary&gt;</span>Disclaimer: This website is for informational purposes only.
            Always check the actual product label in your possession for the most
            accurate ingredient information due to product changes or upgrades
            that may not yet be reflected on our web site. These statements made
            in this website have not been evaluated by the Food and Drug
            Administration. The products offered are not intended to diagnose,
            treat
        <span class="tag">&lt;/summary&gt;</span>
        <span class="tag">&lt;images&gt;</span>
            <span class="tag">&lt;image</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://ecx.images-amazon.com/images/I/216ytnMOeXL._SL30_.jpg
            <span class="tag">&lt;/image&gt;</span>
        <span class="tag">&lt;/images&gt;</span>
    <span class="tag">&lt;/ns1:Item&gt;</span>
    <span class="tag">&lt;ns1:Item</span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/model/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;id&gt;</span>B000I206JK<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;type&gt;</span>Oils<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;name&gt;</span>Now Foods Castor Oil<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;summary&gt;</span>One of the finest natural skin emollients available<span class="tag">&lt;/summary&gt;</span>
        <span class="tag">&lt;images&gt;</span>
            <span class="tag">&lt;image</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://ecx.images-amazon.com/images/I/21Yz8q-yQoL._SL30_.jpg
            <span class="tag">&lt;/image&gt;</span>
        <span class="tag">&lt;/images&gt;</span>
    <span class="tag">&lt;/ns1:Item&gt;</span>
    <span class="tag">&lt;ns1:Item</span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/model/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;id&gt;</span>B003Y5XF2S<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;type&gt;</span>Chemical Hair Dyes<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;name&gt;</span>Manic Panic Semi-Permanent Color Cream<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;summary&gt;</span>Ready to use, no mixing required<span class="tag">&lt;/summary&gt;</span>
        <span class="tag">&lt;images&gt;</span>
            <span class="tag">&lt;image</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://ecx.images-amazon.com/images/I/51A2FuX27dL._SL30_.jpg
            <span class="tag">&lt;/image&gt;</span>
        <span class="tag">&lt;/images&gt;</span>
    <span class="tag">&lt;/ns1:Item&gt;</span>
    <span class="tag">&lt;ns1:Item</span> <span class="attribute-name">xmlns:ns1</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.alainn.com/SOA/model/1.0</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;id&gt;</span>B0016BELU2<span class="tag">&lt;/id&gt;</span>
        <span class="tag">&lt;type&gt;</span>Chemical Hair Dyes<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;name&gt;</span>Herbatint Herbatint Permanent Chestnut (4n)<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;images&gt;</span>
            <span class="tag">&lt;image</span> <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>http://ecx.images-amazon.com/images/I/21woUiM0BdL._SL30_.jpg
            <span class="tag">&lt;/image&gt;</span>
        <span class="tag">&lt;/images&gt;</span>
    <span class="tag">&lt;/ns1:Item&gt;</span>
<span class="tag">&lt;/ns0:getItemsResponse&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%output application/json
%input payload application/xml
%var baseUrl="http://alainn-cosmetics.cloudhub.io/api/v1.0/"
%var urlPage="http://alainn-cosmetics.cloudhub.io/api/v1.0/items"
%var pageIndex=0
%var requestedPageSize=4
%var fullUrl="http://alainn-cosmetics.cloudhub.io/api/v1.0/items"
---
using (pageSize = payload.getItemsResponse.PageInfo.pageSize) {
     links: [
        {
            href: fullUrl,
            rel : "self"
        },
        {
            href: urlPage ++ "?pageIndex=" ++ (pageIndex + pageSize) ++ "&amp;pageSize=" ++ requestedPageSize,
            rel: "next"
        },
        ({
            href: urlPage ++ "?pageIndex=" ++ (pageIndex - pageSize) ++ "&amp;pageSize=" ++ requestedPageSize,
            rel: "prev"
        }) when (pageIndex &gt; 0)
     ],
     collection: {
        size: pageSize,
        items: payload.getItemsResponse.*Item map {
            id: $.id,
            type: $.type,
            name: $.name,
            (summary: $.summary) when $.summary?,
            (brand: $.brand) when $.brand?,
            links: ($.images.*image map {
                href: trim $,
                rel: $.@type
            }) + {
                href: baseUrl ++ "/" ++ $.id,
                rel: "self"
            }
        }
     }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="content">items</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="content">items?pageIndex=20&amp;pageSize=4</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span>
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">collection</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">size</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">20</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B0015BYNRO</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Oils</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Now Foods LANOLIN PURE</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">ecx.images-amazon.com</span><span class="char">\/</span><span class="content">images</span><span class="char">\/</span><span class="content">I</span><span class="char">\/</span><span class="content">11Qoe774Q4L._SL30_.jpg</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span>
          },
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="char">\/</span><span class="content">B0015BYNRO</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
          }
        ]
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B002K8AD02</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bubble Bath</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Deep Steep Honey Bubble Bath</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">summary</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Disclaimer: This website is for informational purposes only.</span><span class="char">\n</span><span class="content">            Always check the actual product label in your possession for the most</span><span class="char">\n</span><span class="content">            accurate ingredient information due to product changes or upgrades</span><span class="char">\n</span><span class="content">            that may not yet be reflected on our web site. These statements made</span><span class="char">\n</span><span class="content">            in this website have not been evaluated by the Food and Drug</span><span class="char">\n</span><span class="content">            Administration. The products offered are not intended to diagnose,</span><span class="char">\n</span><span class="content">            treat</span><span class="char">\n</span><span class="content">        </span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">ecx.images-amazon.com</span><span class="char">\/</span><span class="content">images</span><span class="char">\/</span><span class="content">I</span><span class="char">\/</span><span class="content">216ytnMOeXL._SL30_.jpg</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span>
          },
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="char">\/</span><span class="content">B002K8AD02</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
          }
        ]
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B000I206JK</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Oils</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Now Foods Castor Oil</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">summary</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">One of the finest natural skin emollients available</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">ecx.images-amazon.com</span><span class="char">\/</span><span class="content">images</span><span class="char">\/</span><span class="content">I</span><span class="char">\/</span><span class="content">21Yz8q-yQoL._SL30_.jpg</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span>
          },
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="char">\/</span><span class="content">B000I206JK</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
          }
        ]
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B003Y5XF2S</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Chemical Hair Dyes</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Manic Panic Semi-Permanent Color Cream</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">summary</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Ready to use, no mixing required</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">ecx.images-amazon.com</span><span class="char">\/</span><span class="content">images</span><span class="char">\/</span><span class="content">I</span><span class="char">\/</span><span class="content">51A2FuX27dL._SL30_.jpg</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span>
          },
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="char">\/</span><span class="content">B003Y5XF2S</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
          }
        ]
      },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">B0016BELU2</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Chemical Hair Dyes</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Herbatint Herbatint Permanent Chestnut (4n)</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">links</span><span class="delimiter">&quot;</span></span>: [
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">ecx.images-amazon.com</span><span class="char">\/</span><span class="content">images</span><span class="char">\/</span><span class="content">I</span><span class="char">\/</span><span class="content">21woUiM0BdL._SL30_.jpg</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">SwatchImage</span><span class="delimiter">&quot;</span></span>
          },
          {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http:</span><span class="char">\/</span><span class="char">\/</span><span class="content">alainn-cosmetics.cloudhub.io</span><span class="char">\/</span><span class="content">api</span><span class="char">\/</span><span class="content">v1.0</span><span class="char">\/</span><span class="char">\/</span><span class="content">B0016BELU2</span><span class="delimiter">&quot;</span></span>,
            <span class="key"><span class="delimiter">&quot;</span><span class="content">rel</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>
          }
        ]
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_to_json_2">14.4. XML To Json 2</h3>
<div class="paragraph">
<p>Transforms a webservice response into a json.</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bookstore&gt;</span>
    <span class="tag">&lt;book</span> <span class="attribute-name">category</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">cooking</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Everyday Italian<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;author&gt;</span>Giada De Laurentiis<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;year&gt;</span>2005<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>30.00<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book</span> <span class="attribute-name">category</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">children</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Harry Potter<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;author&gt;</span>J K. Rowling<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;year&gt;</span>2005<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>29.99<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book</span> <span class="attribute-name">category</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">web</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>XQuery Kick Start<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;author&gt;</span>James McGovern<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author&gt;</span>Per Bothner<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author&gt;</span>Kurt Cagle<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author&gt;</span>James Linn<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;author&gt;</span>Vaidyanathan Nagarajan<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;year&gt;</span>2003<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>49.99<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
    <span class="tag">&lt;book</span> <span class="attribute-name">category</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">web</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">cover</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">paperback</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;title</span> <span class="attribute-name">lang</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">en</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Learning XML<span class="tag">&lt;/title&gt;</span>
        <span class="tag">&lt;author&gt;</span>Erik T. Ray<span class="tag">&lt;/author&gt;</span>
        <span class="tag">&lt;year&gt;</span>2003<span class="tag">&lt;/year&gt;</span>
        <span class="tag">&lt;price&gt;</span>39.95<span class="tag">&lt;/price&gt;</span>
    <span class="tag">&lt;/book&gt;</span>
<span class="tag">&lt;/bookstore&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/xml
%output application/json
---
payload.bookstore.*book map {
	item: {
  	type: "book",
    price: $.price as :number,
    properties: {
        title: $.title,
        author: $.*author,
        year: $.year as :number
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">30.00</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Everyday Italian</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Giada De Laurentiis</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2005</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">29.99</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Harry Potter</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">J K. Rowling</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2005</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">49.99</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">XQuery Kick Start</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">James McGovern</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Per Bothner</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Kurt Cagle</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">James Linn</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Vaidyanathan Nagarajan</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2003</span>
      }
    }
  },
  {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">item</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">price</span><span class="delimiter">&quot;</span></span>: <span class="float">39.95</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Learning XML</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">author</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">Erik T. Ray</span><span class="delimiter">&quot;</span></span>
        ],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">year</span><span class="delimiter">&quot;</span></span>: <span class="integer">2003</span>
      }
    }
  }
]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_group_by">14.5. Xml Group By</h3>
<div class="paragraph">
<p>Shows how to group by a criteria</p>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;school&gt;</span>
    <span class="tag">&lt;teachers&gt;</span>
        <span class="tag">&lt;teacher&gt;</span>
            <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;lastName&gt;</span>De Achaval<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;subject&gt;</span>Dfl<span class="tag">&lt;/subject&gt;</span>
        <span class="tag">&lt;/teacher&gt;</span>
        <span class="tag">&lt;teacher&gt;</span>
            <span class="tag">&lt;name&gt;</span>Emiliano<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;lastName&gt;</span>Lesende<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;subject&gt;</span>Dfl<span class="tag">&lt;/subject&gt;</span>
        <span class="tag">&lt;/teacher&gt;</span>
        <span class="tag">&lt;teacher&gt;</span>
            <span class="tag">&lt;name&gt;</span>Leandro<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;lastName&gt;</span>Shokida<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;subject&gt;</span>Scala<span class="tag">&lt;/subject&gt;</span>
        <span class="tag">&lt;/teacher&gt;</span>
    <span class="tag">&lt;/teachers&gt;</span>
    <span class="tag">&lt;students&gt;</span>
        <span class="tag">&lt;student&gt;</span>
            <span class="tag">&lt;name&gt;</span>Peter<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;lastName&gt;</span>Parker<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;hobby&gt;</span>Dfl<span class="tag">&lt;/hobby&gt;</span>
            <span class="tag">&lt;hobby&gt;</span>Scala<span class="tag">&lt;/hobby&gt;</span>
        <span class="tag">&lt;/student&gt;</span>
        <span class="tag">&lt;student&gt;</span>
            <span class="tag">&lt;name&gt;</span>Homer<span class="tag">&lt;/name&gt;</span>
            <span class="tag">&lt;lastName&gt;</span>Simpson<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;hobby&gt;</span>Scala<span class="tag">&lt;/hobby&gt;</span>
        <span class="tag">&lt;/student&gt;</span>
    <span class="tag">&lt;/students&gt;</span>
<span class="tag">&lt;/school&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/xml
%output application/weave
---
classrooms: payload.school.teachers.*teacher groupBy $.subject mapObject ((teacherGroup, subject) -&gt; {
    class: {
      name: subject,
      teachers: { (teacherGroup map {
        teacher:{
            name: $.name,
            lastName: $.lastName
        }
      }) },
      attendees: { (payload.school.students.*student filter ($.*hobby contains subject) map {
        attendee: {
          name: $.name,
          lastName: $.lastName
        }
      }) }
    }
})</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;classrooms&gt;</span>
    <span class="tag">&lt;class&gt;</span>
        <span class="tag">&lt;name&gt;</span>Dfl<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;teachers&gt;</span>
            <span class="tag">&lt;teacher&gt;</span>
                <span class="tag">&lt;name&gt;</span>Mariano<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>De Achaval<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/teacher&gt;</span>
            <span class="tag">&lt;teacher&gt;</span>
                <span class="tag">&lt;name&gt;</span>Emiliano<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>Lesende<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/teacher&gt;</span>
        <span class="tag">&lt;/teachers&gt;</span>
        <span class="tag">&lt;attendees&gt;</span>
            <span class="tag">&lt;attendee&gt;</span>
                <span class="tag">&lt;name&gt;</span>Peter<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>Parker<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/attendee&gt;</span>
        <span class="tag">&lt;/attendees&gt;</span>
    <span class="tag">&lt;/class&gt;</span>
    <span class="tag">&lt;class&gt;</span>
        <span class="tag">&lt;name&gt;</span>Scala<span class="tag">&lt;/name&gt;</span>
        <span class="tag">&lt;teachers&gt;</span>
            <span class="tag">&lt;teacher&gt;</span>
                <span class="tag">&lt;name&gt;</span>Leandro<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>Shokida<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/teacher&gt;</span>
        <span class="tag">&lt;/teachers&gt;</span>
        <span class="tag">&lt;attendees&gt;</span>
            <span class="tag">&lt;attendee&gt;</span>
                <span class="tag">&lt;name&gt;</span>Peter<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>Parker<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/attendee&gt;</span>
            <span class="tag">&lt;attendee&gt;</span>
                <span class="tag">&lt;name&gt;</span>Homer<span class="tag">&lt;/name&gt;</span>
                <span class="tag">&lt;lastName&gt;</span>Simpson<span class="tag">&lt;/lastName&gt;</span>
            <span class="tag">&lt;/attendee&gt;</span>
        <span class="tag">&lt;/attendees&gt;</span>
    <span class="tag">&lt;/class&gt;</span>
<span class="tag">&lt;/classrooms&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_remove_sensitive_data">14.6. Xml Remove Sensitive Data</h3>
<div class="paragraph">
<p>In order to send information to an external service, some critical personal data should be removed:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>SSN</p>
</li>
<li>
<p>Password</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;users&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Emiliano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Romoaldo<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>Lesende<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>001-08-84382<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>3miliano<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>semecalientalachichi<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Mariano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Toribio<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>de Achaval<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>002-05-34738<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>machaval<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>tiquichiqui<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/xml
%output application/xml
---
users: { (payload.users.*user map {
     user: {
        personal_information: $.personal_information - "ssn",
        login_information: $.login_information - "password"
      }
 }) }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;users&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Emiliano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Romoaldo<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>Lesende<span class="tag">&lt;/last_name&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>3miliano<span class="tag">&lt;/username&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Mariano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Toribio<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>de Achaval<span class="tag">&lt;/last_name&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>machaval<span class="tag">&lt;/username&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_replacement">14.7. Replacement</h3>
<div class="paragraph">
<p>In order to populate QA environment databases with valid data from Production environment, critical information needs to be masked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SSN (Social Security Numbers) are masked using java static method: com.company.MaskUtils.maskSSN(String originalSSN)</p>
</li>
<li>
<p>Password needs to be replaced with the same amount of '*' as its length</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Input</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;users&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Emiliano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Romoaldo<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>Lesende<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>001-08-84382<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>3miliano<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>semecalientalachichi<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Mariano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Toribio<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>de Achaval<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>002-05-34738<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>machaval<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>tiquichiqui<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Transformation</div>
<div class="content">
<pre class="CodeRay highlight"><code>%dw 0.1
%input payload application/xml
%output application/xml
---
users: { (payload.users.*user map {
    user: {
       personal_information: $.personal_information mapObject {
            ($$): $ unless $$ ~= "ssn" otherwise "****"
       },
       login_information: $.login_information mapObject {
          ($$): $ unless $$ ~= "password" otherwise "****"
       }
     }
}) }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Output</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;users&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Emiliano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Romoaldo<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>Lesende<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>****<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>3miliano<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>****<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
    <span class="tag">&lt;user&gt;</span>
        <span class="tag">&lt;personal_information&gt;</span>
            <span class="tag">&lt;first_name&gt;</span>Mariano<span class="tag">&lt;/first_name&gt;</span>
            <span class="tag">&lt;middle_name&gt;</span>Toribio<span class="tag">&lt;/middle_name&gt;</span>
            <span class="tag">&lt;last_name&gt;</span>de Achaval<span class="tag">&lt;/last_name&gt;</span>
            <span class="tag">&lt;ssn&gt;</span>****<span class="tag">&lt;/ssn&gt;</span>
        <span class="tag">&lt;/personal_information&gt;</span>
        <span class="tag">&lt;login_information&gt;</span>
            <span class="tag">&lt;username&gt;</span>machaval<span class="tag">&lt;/username&gt;</span>
            <span class="tag">&lt;password&gt;</span>****<span class="tag">&lt;/password&gt;</span>
        <span class="tag">&lt;/login_information&gt;</span>
    <span class="tag">&lt;/user&gt;</span>
<span class="tag">&lt;/users&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2015-07-21 16:06:40 ART
</div>
</div>
</body>
</html>